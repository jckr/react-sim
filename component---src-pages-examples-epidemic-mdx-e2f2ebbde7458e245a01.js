(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{CczQ:function(t,e,r){var n=r("P8UN"),a=Math.abs;n(n.S,"Math",{hypot:function(t,e){for(var r,n,i=0,o=0,c=arguments.length,s=0;o<c;)s<(r=a(arguments[o++]))?(i=i*(n=s/r)*n+1,s=r):i+=r>0?(n=r/s)*n:r;return s===1/0?1/0:s*Math.sqrt(i)}})},Hmny:function(t,e,r){"use strict";r.r(e),r.d(e,"_frontmatter",(function(){return k})),r.d(e,"default",(function(){return x}));r("rzGZ"),r("Dq+y"),r("8npG"),r("Ggvi"),r("E5k/");var n=r("q1tI"),a=r.n(n),i=r("7ljp"),o=(r("pJf4"),r("q8oJ"),r("cFtU"),r("m210"),r("4DPX"),r("n0hJ"),r("YbXK"),r("ToIb"),r("CczQ"),r("VdAu")),c=r("1uUR");function s(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var l={sick:"#4f8c9d",recovered:"#add51f",healthy:"#997cfb",dead:"#6a9012"};function d(t,e){var r=t.data,n=t.tick,a=t.params,i=t.complete;void 0===e&&(e=Math.random());var o=JSON.parse(JSON.stringify(r.agents)),c=0,s=0,u=0,l=0,d=a.contaminationRisk,h=a.deathRisk,v=a.r,f=a.recoveryTicks,y=a.height,p=a.width;return o.forEach((function(t,r){if("sick"===t.status&&(n>=t.recovery?t.status="recovered":e()<h&&(t.status="dead")),"dead"!==t.status){for(var a=r+1;a<o.length;a++){var i=o[a],m=i.x-t.x,b=i.y-t.y,k=Math.hypot(m,b);if(k<2*v){var g=m/k,x=b/k;t.vx=t.vx-g,t.vy=t.vy-x,i.vx=g,i.vy=x,"sick"===t.status&&"healthy"===i.status&&e()<=d&&(i.status="sick",i.recovery=n+f),"healthy"===t.status&&"sick"===i.status&&e()<=d&&(t.status="sick",t.recovery=n+f)}}t.x=t.x+t.vx,t.y=t.y+t.vy,(t.vy<0&&t.y<v||t.vy>0&&t.y>y-v)&&(t.vy=-t.vy),(t.vx<0&&t.x<v||t.vx>0&&t.x>p-v)&&(t.vx=-t.vx)}switch(t.status){case"sick":c++;break;case"healthy":s++;break;case"recovered":l++;break;case"dead":u++}})),0===c&&i(),{agents:o,sick:c,recovered:l,dead:u,healthy:s}}function h(t,e,r){for(var n=s(Array(t).keys()).reduce((function(t,e){return t[e]=!0,t}),{}),a=new Set,i=0;i<e;i++){var o=Math.floor(r*Object.keys(n).length);a.add(o),delete n[o]}return a}function v(t,e,r,n){var a=n.x,i=n.y;return t.slice(e).filter((function(t){var e=t.x,n=t.y;return Math.hypot(e-a,n-i)<r}))}function f(t,e){var r=t.nbAgents,n=void 0===r?200:r,a=t.nbSick,i=void 0===a?5:a,o=t.maxSpeed,c=void 0===o?30:o,s=(t.contaminationRisk,t.deathRisk,t.recoveryTicks),u=void 0===s?20:s,l=t.nbDistancing,d=void 0===l?50:l,f=t.r,y=void 0===f?3:f,p=t.height,m=void 0===p?300:p,b=t.width,k=void 0===b?400:b;void 0===e&&(e=Math.random);for(var g=h(n,i,e),x=h(n,d,e),w=[],j=0;j<n;j++){var O=void 0,S=void 0;do{S=y/2+e()*(m-y),O=y/2+e()*(k-y)}while(v(w,0,y,{x:O,y:S}).length);var E=g.has(j)?"sick":"healthy",R=g.has(j)?u:null,D=x.has(j),M=D?0:c,A=M*(2*e()-1),T=M*(2*e()-1);w.push({x:O,y:S,status:E,isBouncing:!1,isDistancing:D,vx:A,vy:T,recovery:R,speed:M})}return{agents:w,sick:i,healthy:n-i,dead:0,recovered:0}}var y=function(t){var e,r;function n(e){var r;return(r=t.call(this,e)||this).myRef=a.a.createRef(),r}r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var i=n.prototype;return i.componentDidUpdate=function(){var t=this.props,e=t.data,r=t.params,n=r.width,a=r.height,i=r.r,o=this.myRef.current.getContext("2d");o.fillStyle="#fff",o.lineWidth="5px",o.clearRect(0,0,n,a),e.agents.forEach((function(t){var e=t.status,r=(t.isBouncing,t.x),n=t.y;o.beginPath(),o.fillStyle=l[e],o.arc(r,n,i,0,2*Math.PI,!1),o.closePath(),o.fill()}))},i.render=function(){return a.a.createElement("div",null,a.a.createElement("canvas",{width:this.props.params.width,height:this.props.params.height,ref:this.myRef}))},n}(a.a.Component),p=Object(c.i)(y),m=[{color:l.healthy,label:"Healthy",accessor:function(t){return t.healthy}},{color:l.sick,label:"Sick",accessor:function(t){return t.sick}},{color:l.recovered,label:"Recovered",accessor:function(t){return t.recovered}},{color:l.dead,label:"Dead",accessor:function(t){return t.dead}}],b=function(){return a.a.createElement(c.d,{auto:"false",initData:f,initialParams:{nbAgents:500,nbSick:20,contaminationRisk:1,deathRisk:.001,maxSpeed:2,recoveryTicks:200,nbDistancing:0,r:3,height:300,width:500},updateData:d,maxTime:500},a.a.createElement(o.c,{flexDirection:"column"},a.a.createElement(p,null),a.a.createElement(c.f,{series:m,stacked:!0}),a.a.createElement(c.b,{series:m})))};var k={Title:"Epidemic"},g={_frontmatter:k};function x(t){var e=t.components,r=function(t,e){if(null==t)return{};var r,n,a={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(a[r]=t[r]);return a}(t,["components"]);return Object(i.b)("wrapper",Object.assign({},g,r,{components:e,mdxType:"MDXLayout"}),Object(i.b)("h1",null,"Epidemic"),Object(i.b)(b,{mdxType:"Epidemic"}),Object(i.b)("h3",null,"Caveat"),Object(i.b)("p",null,"The purpose of this model is just to show how simulations work in React. It has no scientific value."))}x.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-examples-epidemic-mdx-e2f2ebbde7458e245a01.js.map