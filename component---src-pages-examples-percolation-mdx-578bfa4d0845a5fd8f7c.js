(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{xSBE:function(t,e,r){"use strict";r.r(e),r.d(e,"_frontmatter",(function(){return E})),r.d(e,"default",(function(){return T}));r("rzGZ"),r("Dq+y"),r("8npG"),r("Ggvi"),r("E5k/");var n=r("q1tI"),i=r.n(n),a=r("7ljp"),o=(r("pJf4"),r("q8oJ"),r("YbXK"),r("cFtU"),r("m210"),r("4DPX"),r("n0hJ"),r("YBKJ"),r("VdAu")),l=r("1uUR");function c(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var s=function(t){return i.a.createElement(o.c,{sx:{border:"1px solid #000",p:2,width:"fit-content"}},i.a.createElement(l.f,t))},h="PENDING",d="SUCCESS",f="FAILURE";function m(t){var e=t.data,r=t.params,n=t.complete,i=e.queue,a=e.grid,o=r.height,l=(r.width,e.status);0===i.length&&(l=f);for(var c=[];i.length>0&&l===h;){var u=i.shift(),s=u.x,m=u.y;m===o-1?l=d:0===a[m+1][s]&&(a[m+1][s]=6,c.push({x:s,y:m+1})),0===a[m][s-1]&&(a[m][s-1]=7,c.push({x:s-1,y:m})),0===a[m][s+1]&&(a[m][s+1]=8,c.push({x:s+1,y:m}))}return l!==h&&r.shouldComplete&&n(l),{grid:a,queue:c,status:l}}function p(t){var e=t.data,r=t.params,n=t.complete,i=0;return e.grids.forEach((function(t,n){return t.forEach((function(t,a){if(t.status===h){var o=m({data:t,params:{height:r.height,shouldComplete:!1}});e.grids[n][a]=o,o.status===h&&i++,o.status===d&&e.cols[a].result++}}))})),0===i&&n(),e}function g(t){var e,r,n=t.porosity,i=t.height,a=t.width,o=[],l=[];for(r=0;r<i;r++){var c=[];for(e=0;e<a;e++)c.push(Math.random()>Number(n)?1:0);o.push(c)}for(r=0;r<i;r++)for(e=0;e<a;e++)o[r][e]?(o[r+1]&&o[r+1][e]&&(o[r][e]=o[r][e]+2),o[r][e+1]&&(o[r][e]=o[r][e]+1),4===o[r][e]&&o[r+1][e+1]&&(o[r][e]=5)):0===r&&(o[r][e]=6,l.push({x:e,y:r}));return{grid:o,queue:l,status:h}}var y=function(t){var e=t.data,r=t.params,a=r.cellSize,o=r.margin,l=r.height,c=r.width,u=Object(n.useRef)(null);return Object(n.useEffect)((function(){var t=u.current.getContext("2d");t.fillStyle="beige",t.fillRect(0,0,c*a,l*a),null!==e&&e.grid.forEach((function(e,r){e.forEach((function(e,n){var i=n*a,l=r*a;e>=1&&e<=5&&(t.fillStyle="#777",function(t){var e=t.ctx,r=t.x,n=t.y,i=t.width,a=t.height,o=t.r,l=void 0===o?1:o,c=t.tl,u=t.tr,s=t.br,h=c||l,d=u||l,f=t.bl||l,m=s||l;e.beginPath(),e.moveTo(r+h,n),e.lineTo(r+i-d,n),e.quadraticCurveTo(r+i,n,r+i,n+d),e.lineTo(r+i,n+a-m),e.quadraticCurveTo(r+i,n+a,r+i-m,n+a),e.lineTo(r+f,n+a),e.quadraticCurveTo(r,n+a,r,n+a-f),e.lineTo(r,n+h),e.quadraticCurveTo(r,n,r+h,n),e.closePath()}({ctx:t,x:i+o,y:l+o,r:o,height:a-2*o,width:a-2*o}),t.fill(),2!==e&&4!==e&&5!==e||t.fillRect(i+a-2*o,l+o,4*o,a-2*o),3!==e&&4!==e&&5!==e||t.fillRect(i+o,l+a-2*o,a-2*o,4*o),5===e&&t.fillRect(i+a-2*o,l+a-2*o,4*o,4*o)),e>=6&&(t.lineWidth=a-2*o,t.strokeStyle="cyan",t.lineCap="round",t.beginPath(),t.moveTo(i+a/2,l+a/2),6===e&&t.lineTo(i+a/2,Math.max(l-a/2,0)),8===e&&t.lineTo(i-a/2,l+a/2),7===e&&t.lineTo(i+3*a/2,l+a/2),t.stroke())}))}))})),i.a.createElement("div",{style:{boxSizing:"content-box",height:a*l,width:a*c,border:"3px solid "+(e.status===h?"transparent":e.status===d?"#33e":"#777")}},i.a.createElement("canvas",{width:c*a,height:l*a,ref:u}))},b=function(t){var e=t.data,r=t.params,n=r.height*r.cellSize,a=r.width*r.cellSize;return i.a.createElement("div",{style:{display:"flex",flexDirection:"column",height:(n+10)*r.rows+60,width:(a+10)*r.cols+10}},i.a.createElement(o.c,{flexDirection:"row"},e.cols.map((function(t){return i.a.createElement(o.a,{sx:{width:[a],fontSize:1,textAlign:"center",fontWeight:2,m:"5px"}},t.p.toFixed(2))}))),e.grids.map((function(t,e){return i.a.createElement("div",{style:{display:"flex",flexDirection:"row"},key:"row-"+e},t.map((function(t,n){return i.a.createElement("div",{style:{height:r.height*r.cellSize,width:r.width*r.cellSize,margin:5}},i.a.createElement(y,{key:"cell-"+n+"-"+e,data:t,params:r}))})))})),i.a.createElement(o.c,{flexDirection:"row"},e.cols.map((function(t){return i.a.createElement(o.a,{sx:{width:[a],fontSize:1,textAlign:"center",m:"5px"}},t.result+"/"+t.total)}))))},w=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(s,{auto:!1,controls:{param:"porosity",label:"Porosity",minValue:0,maxValue:1,step:.01},updateData:m,maxTime:1/0,initData:g,initialParams:{width:100,height:100,cellSize:5,margin:0,porosity:.6,shouldComplete:!0}},i.a.createElement(y,null)))};function v(t){var e=t.width,r=t.height,n=(t.cellSize,t.margin,t.rows),i=t.cols,a=t.minP,o=t.stepP,l=c(Array(i).keys());return{cols:l.map((function(t){return{p:a+t*o,result:0,total:n}})),grids:c(Array(n).keys()).map((function(t){return l.map((function(t){return g({height:r,width:e,porosity:a+t*o})}))}))}}var x=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(s,{auto:!1,updateData:p,maxTime:1/0,initData:v,initialParams:{width:20,height:20,cellSize:1.5,margin:0,rows:10,cols:10,minP:.5,stepP:.02}},i.a.createElement(b,null)))};var E={Title:"Percolation"},S={_frontmatter:E};function T(t){var e=t.components,r=function(t,e){if(null==t)return{};var r,n,i={},a=Object.keys(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||(i[r]=t[r]);return i}(t,["components"]);return Object(a.b)("wrapper",Object.assign({},S,r,{components:e,mdxType:"MDXLayout"}),Object(a.b)("h1",null,"Percolation"),Object(a.b)("p",null,"A 2D lattice is made of cells which either let liquid go through (porous) or not.\nIf we pour liquid on the top of the lattice, will any of it go through? This depends on the porosity of the lattice, i.e. the percentage of cells which are porous."),Object(a.b)(w,{mdxType:"Percolation"}),Object(a.b)("p",null,"Interestingly, the chances of liquid getting through don't vary linearly with the porosity. If porosity is beyond a certain ",Object(a.b)("a",Object.assign({parentName:"p"},{href:"https://en.wikipedia.org/wiki/Percolation_threshold"}),"threshold"),", there are very little chances that the liquid gets through, and beyond that threshold it becomes very likely.\nFor our 2D lattice with liquid being able to go in all 4 directions, the threshold is around ",Object(a.b)("em",{parentName:"p"},"0.59"),"."),Object(a.b)("p",null,"To see how dramatically the chances of liquid percolating increase once we're past the threshold, let's simulate 100 pours at a time:\nOn that grid, every column has the same porosity index."),Object(a.b)(x,{mdxType:"PercolationGrid"}))}T.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-examples-percolation-mdx-578bfa4d0845a5fd8f7c.js.map