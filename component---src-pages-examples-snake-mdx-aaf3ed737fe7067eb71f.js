(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{hMyd:function(t,e,r){"use strict";r.r(e),r.d(e,"_frontmatter",(function(){return C})),r.d(e,"default",(function(){return J}));r("rzGZ"),r("Dq+y"),r("8npG"),r("Ggvi"),r("E5k/");var n=r("q1tI"),i=r.n(n),a=r("7ljp"),o=r("1uUR"),c=(r("xtjI"),r("4DPX"),r("VdAu"));r("pJf4"),r("q8oJ"),r("YbXK"),r("cFtU"),r("m210");function u(t){return function(t){if(Array.isArray(t))return h(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var l=[0,1,2,3],d=[2,3,0,1],s=[!0,!1,!0,!1],f=[[0,-1],[1,0],[0,1],[-1,0]],p=f.reduce((function(t,e,r){return t[e]=r,t}),{});function g(t,e){return t+Math.floor(Math.random()*(e+1-t))}function v(t,e,r,n,i){return!(t<0||t>i-1||e<0||e>n-1)&&!r[[t,e]]}function m(t,e){void 0===t&&(t=[[]]),void 0===e&&(e=[]);var r=t.reduce((function(t,e,r){return e.reduce((function(t,e,n){return e>0&&(t[[n,r]]=!0),t}),t)}),{});return e.forEach((function(t){var e=t[0],n=t[1];return r[[e,n]]=!0})),r}function b(t){var e=t.grid,r=t.start,n=t.end,i=e.length;if(0===i)return[];var a=e[0].length,o=m(e);delete o[n];var c={},u=[r];c[r]=[r];for(var h=!1,d=function(){var t=u.shift();l.forEach((function(e){var r=[t[0]+f[e][0],t[1]+f[e][1]],l=r[0],d=r[1];v(l,d,o,i,a)&&(o[r]=!0,c[r]=c[t].concat([r]),l===n[0]&&d===n[1]&&(h=!0),u.push(r))}))};u.length&&!h;)d();return c[n]}function y(t){var e=t.grid,r=t.start,n=t.end,i=e.length;if(0===i)return[];for(var a=e[0].length,o=b({grid:e,start:r,end:n})||[r],c=m(e,o),u=[o.shift()];o.length;){var h=w({height:i,longestPath:u,stack:o,visited:c,width:a});o=h.stack,c=h.visited,u=h.longestPath}return u}function w(t){var e=t.height,r=t.longestPath,n=t.stack,i=t.visited,a=t.width,o=r[r.length-1];i[o]=!0;var c=n.shift(),h=c[0]-o[0],l=c[1]-o[1],d=[[o[0]-l,o[1]-h],[c[0]-l,c[1]-h]],s=[[o[0]+l,o[1]+h],[c[0]+l,c[1]+h]];return v.apply(void 0,u(d[0]).concat([i,e,a]))&&v.apply(void 0,u(d[1]).concat([i,e,a]))?(n.unshift(c),n.unshift(d[1]),n.unshift(d[0]),i[d[0]]=!0,i[d[1]]=!0):v.apply(void 0,u(s[0]).concat([i,e,a]))&&v.apply(void 0,u(s[1]).concat([i,e,a]))?(n.unshift(c),n.unshift(s[1]),n.unshift(s[0]),i[s[0]]=!0,i[s[1]]=!0):r.push(c),{stack:n,visited:i,longestPath:r}}function k(t){var e=t.grid,r=t.path,n=void 0===r?[]:r,i=t.direction,a=t.stack,o=void 0===a?[]:a,c=[].concat(u(n),u(o)),h=e.map((function(t){return t.map((function(t){return t?i:void 0}))}));if(c.length<2)return h;c[0];for(var l,d=1;d<c.length;d++){var s=c[d-1],f=(l=c[d])[0]-s[0],g=l[1]-s[1],v=s[0];h[s[1]][v]=p[[f,g]]}if(i){var m=l,b=m[0];h[m[1]][b]=i}return h}function O(t){var e=t.reduce((function(t,e,r){return e.reduce((function(t,e,n){return 0===e&&t.push([r,n]),t}),t)}),[]);return 0===e.length?null:e[Math.floor(Math.random()*e.length)]}function j(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function P(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?j(Object(r),!0).forEach((function(e){E(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function E(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var S=function t(e){var r=e.size,n=e.color,a=e.directionNext,o=e.directionPrev,c=e.weight;if(null===a)return null===o?(console.log("warning - double null"),null):t({size:r,color:n,weight:c,directionNext:o,directionPrev:null});var u=(1-c)/2*r,h=c*r;if(null===o)return i.a.createElement("div",{style:{height:r,width:r,position:"relative"}},i.a.createElement("div",{style:{borderRadius:"50%",height:h,width:h,background:n,left:u,top:u,position:"absolute"}}),i.a.createElement("div",{style:P(P(P(P(P({position:"absolute",background:n},s[a]?{width:h,left:u,height:r/2}:{width:r/2,top:u,height:h}),0===a?{top:0}:{}),2===a?{bottom:0}:{}),3===a?{left:0}:{}),1===a?{right:0}:{})}));if(a===d[o])return i.a.createElement("div",{style:{height:r,width:r,position:"relative"}},i.a.createElement("div",{style:P({position:"absolute",background:n},s[a]?{width:h,height:r,left:u}:{width:r,height:h,top:u})}));var l=0===a||0===o,f=3===a||3===o,p={topleft:"0 0 100% 0",topright:"0 0 0 100%",bottomleft:"0 100% 0 0",bottomright:"100% 0 0 0"}[l?f?"topleft":"topright":f?"bottomleft":"bottomright"],g=P(P({},l?{top:0}:{bottom:0}),f?{left:0}:{right:0}),v=P({borderRadius:p},g);return i.a.createElement("div",{style:{height:r,width:r,position:"relative",overflow:"hidden"}},i.a.createElement("div",{style:P({position:"absolute",background:n,width:h+u,height:h+u},v)}),i.a.createElement("div",{style:P({position:"absolute",background:"white",width:u,height:u},v)}))},x=function(t){var e=t.size,r=t.action;return i.a.createElement("div",{style:{boxSizing:"border-box",position:"relative",height:e,width:e,border:"1px solid #eee"}},i.a.createElement("div",{style:{position:"absolute",height:0,width:e-1,border:void 0===r?"none":"1px dashed #555",transformOrigin:"0 100%",left:(e-1)/2,top:(e-1)/2,transform:"rotate("+90*(r-1)+"deg)"}}))},A=function(t){var e,r;function n(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).renderAG=function(){var t,r=(null===(t=e.props)||void 0===t?void 0:t.data).actionGrid;if(!r)return null;var n=e.props.params.cellSize;return i.a.createElement("div",{className:"actions",style:{position:"absolute"}},r.map((function(t,e){return i.a.createElement(c.c,{flexDirection:"row",key:"ar-"+e},t.map((function(t,r){return i.a.createElement(x,{size:n,action:t,key:"arc-"+e+"-"+r})})))})))},e.renderSnake=function(){var t,r=e.props.params.cellSize,n=null===(t=e.props)||void 0===t?void 0:t.data,a=n.grid,o=n.fruit;return a?i.a.createElement(c.c,{flexDirection:"column",className:"snake"},a.map((function(t,e){return i.a.createElement(c.c,{flexDirection:"row",key:"sr-"+e},t.map((function(t,n){if(0===t)return i.a.createElement("div",{key:"fruit-"+e+"-"+n,style:{width:r,height:r,display:"flex",alignItems:"center",justifyContent:"center"}},o&&n===o[0]&&e===o[1]?"ðŸŽ":"");var c=null,u=null;return a[e][n+1]&&(a[e][n+1]===t+1&&(u=1),a[e][n+1]===t-1&&(c=1)),a[e][n-1]&&(a[e][n-1]===t+1&&(u=3),a[e][n-1]===t-1&&(c=3)),a[e+1]&&a[e+1][n]&&(a[e+1][n]===t+1&&(u=2),a[e+1][n]===t-1&&(c=2)),a[e-1]&&a[e-1][n]&&(a[e-1][n]===t+1&&(u=0),a[e-1][n]===t-1&&(c=0)),i.a.createElement(S,{size:r,weight:.8,color:"green",directionNext:c,directionPrev:u,key:"src-"+e+"-"+n})})))}))):null},e}r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var a=n.prototype;return a.renderFruit=function(){},a.render=function(){var t=this.props.data;if(null===t)return null;t.actionGrid,t.grid;var e=this.props.params,r=e.width,n=e.height,a=e.cellSize;return i.a.createElement("div",{style:{boxSizing:"content-box",width:r*a,height:n*a,border:"2px solid black",padding:a}},this.renderAG(),this.renderSnake(),this.renderFruit())},n}(i.a.Component);function M(t){return function(t){if(Array.isArray(t))return G(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return G(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function T(t){var e=t.directionRandom,r=t.directionText,n=t.height,i=t.width,a=t.initialLength,o=t.snakePosRandom,c=t.xHead,u=t.yHead,h=e?Math.floor(4*Math.random()):{up:0,right:1,down:2,left:3}[r],l=1===h?a+2:2,s=i-1-(3===h?a+2:2),p=2===h?a+2:2,v=n-1-(0===h?a+2:2);o?(c=g(l,s),u=g(p,v)):(c=Math.min(s,Math.max(l,c)),u=Math.min(v,Math.max(p,u)));for(var m=[],b=0;b<n;b++){for(var y=[],w=0;w<i;w++)y.push(0);m.push(y)}for(var k=[c,u],O=[],j=[],P=0;P<a;P++){var E=c+P*f[d[h]][0],S=u+P*f[d[h]][1];m[S][E]=P+1,j.unshift([E,S]),O=[E,S]}return{behindTail:[O[0]+f[d[h]][0],O[1]+f[d[h]][1]],direction:h,frontOfSnake:[c+f[h][0],u+f[h][1]],grid:m,length:a,head:k,snakePath:j,tail:O}}function D(t){var e=T(t),r=e.grid,n=e.head,i=e.tail,a=e.direction,o=e.snakePath,c=(t.height,t.width,b({grid:r,start:n,end:i})),u=m(r,c),h=[].concat(M(o),[c.shift()]);return{actionGrid:k({grid:r,path:h,stack:c,direction:a}),direction:a,grid:r,stack:c,visited:u,longestPath:h}}function z(t){var e=T(t),r=e.grid,n=(e.frontOfSnake,e.behindTail,e.head),i=e.tail,a=e.direction,o=e.length,c=e.snakePath,u=O(r);return{head:n,grid:r,direction:a,actionGrid:k({grid:r,path:y({grid:r,start:n,end:i}),direction:a}),fruit:u,length:o,snakePath:c,bestPath:!1}}function I(t){for(var e=t.data,r=t.params,n=t.complete,i=e.actionGrid,a=e.bestPath,o=e.grid,c=e.direction,u=e.head,h=e.fruit,l=e.length,d=i,s=a,p=r.fruitGrowth,g=r.height,v=r.width,m=r.safeMode,w=[],j=o.map((function(t,e){return t.map((function(t,r){return 0===t||t+1>l?0:(w[l-t-1]=[r,e],t+1)}))}));void 0===w[0];)w.shift();var P=w[0],E=[u[0]+f[c][0],u[1]+f[c][1]];(0!==j[E[1]][E[0]]||E[0]>=v||E[0]<0||E[1]>=g||E[1]<0)&&n(),j[E[1]][E[0]]=1,j.every((function(t){return t.every((function(t){return t}))}))&&n();var S=l,x=h?[h[0],h[1]]:[-1,-1];if(E[0]===h[0]&&E[1]===h[1]&&(S=Math.min(g*v,S+p),m||(s=!1),x=O(j)),!1===s){var A=b({grid:o,start:E,end:x});if(A){var G=[].concat(w,M(A)),T=y({grid:function(t,e){var r=t.map((function(t){return t.map((function(t){return t}))}));return e.forEach((function(t){var e=t[0],n=t[1];return r[n][e]=1})),r}(j,G),start:x,end:P});G.length+T.length===g*v+2&&(d=k({grid:o,path:G,stack:T}),s=!0)}}return{actionGrid:d,bestPath:s,direction:d[E[1]][E[0]],fruit:x,grid:j,head:E,length:S,snakePath:w}}function R(t){var e=t.data,r=t.params,n=t.complete,i=e.direction,a=e.grid,o=e.longestPath,c=e.stack,u=e.visited,h=w({height:r.height,longestPath:o,stack:c,visited:u,width:r.width}),l=k({grid:a,path:o,stack:c,direction:i});return 0===c.length&&n(),{actionGrid:l,direction:i,grid:a,longestPath:h.longestPath,stack:h.stack,visited:h.visited}}A.defaultProps={width:30,height:30,initialLength:4};var _=function(){return i.a.createElement(o.d,{auto:!1,maxTime:1/0,initData:z,initialParams:{cellSize:25,fruitGrowth:4,height:10,width:10,initialLength:2,safeMode:!0,snakePosRandom:!0,directionRandom:!0},updateData:I},i.a.createElement(A,null))},N=function(){return i.a.createElement(o.d,{auto:!1,maxTime:1/0,initData:D,initialParams:{cellSize:25,fruitGrowth:4,height:10,width:10,initialLength:2,snakePosRandom:!0,directionRandom:!0},updateData:R},i.a.createElement(A,null))};var C={Title:"Snake"},L={_frontmatter:C};function J(t){var e=t.components,r=function(t,e){if(null==t)return{};var r,n,i={},a=Object.keys(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||(i[r]=t[r]);return i}(t,["components"]);return Object(a.b)("wrapper",Object.assign({},L,r,{components:e,mdxType:"MDXLayout"}),Object(a.b)("h1",null,"Snake"),Object(a.b)(_,{mdxType:"Snake"}),Object(a.b)("p",null,"This model tries to win the game of ",Object(a.b)("a",Object.assign({parentName:"p"},{href:"https://en.wikipedia.org/wiki/Snake_(video_game_genre)"}),"Snake"),"."),Object(a.b)("p",null,"A snake moves on a 2d grid. It can go straight, turn left or right. If it hits the borders of the grid or a part of its body, the game is over. If the snake eats a fruit, it grows in size. The goal of the game is to eat all the fruits, until the snake covers the entirety of the grid."),Object(a.b)("p",null,"The way the model works is by finding a circuit which is safe for the snake to use. If we can find a circuit that covers the whole grid, then the snake can loop on that circuit endlessly and never collide with anything else than with a fruit.\nHow do we find such a circuit? We start by finding the ",Object(a.b)("em",{parentName:"p"},"shortest path")," between the head and the tail of the snake. Then, we see how we can extend this path step by step. This other model shows how this works:"),Object(a.b)(N,{mdxType:"SnakeGrid"}))}J.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-examples-snake-mdx-aaf3ed737fe7067eb71f.js.map