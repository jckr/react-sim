(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"+7ga":function(e,t,n){e.exports=n.p+"static/automata-b39fb918fe98750c08d0c7739c8e4c37.gif"},"+CGw":function(e,t,n){"use strict";n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"a",(function(){return m}));var r=n("dI71"),a=n("rePB"),i=n("q1tI"),o=n.n(i),c=n("2A+t"),l=n("VdAu"),s=n("sCKr");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=function(e){return Math.ceil(6*e())};function d(e,t){var n,r=e.data,a=e.tick,i=e.params.nbDice;void 0===t&&(t=Math.random);for(var o=r.totals,c=0,l=[],s=0;s<i;s++)l.push(f(t)),c+=l[s];var u=h(h({},o),{},((n={})[c]=(o[c]||0)+1,n));return{rolls:l,average:(r.average*(a-1)+r.total)/a,total:c,totals:u}}function p(e){return{rolls:[],average:3.5*e.nbDice,total:0,totals:{}}}var m=function(e){var t=e.value,n={background:"#000",width:3,height:3,borderRadius:"100%",position:"absolute"},r={top:3},a={bottom:3},i={right:3},c={left:3},l={top:8};return o.a.createElement("div",{style:{width:21,height:21,marginRight:10,position:"relative",border:"1px solid #000",borderRadius:"3px"}},1!==t&&o.a.createElement("div",{style:h(h(h({},n),r),c)}),t>3&&o.a.createElement("div",{style:h(h(h({},n),r),i)}),6===t&&o.a.createElement("div",{style:h(h(h({},n),l),c)}),t%2==1&&o.a.createElement("div",{style:h(h(h({},n),l),{left:8})}),6===t&&o.a.createElement("div",{style:h(h(h({},n),l),i)}),t>3&&o.a.createElement("div",{style:h(h(h({},n),a),c)}),1!==t&&o.a.createElement("div",{style:h(h(h({},n),a),i)}))},g=function(e){var t,n=e.label,r=e.max,a=e.nbRolls,i=e.nbValues,c=e.theme,s=r?50*a/r:0,u=350/i,h=(null==c||null===(t=c.colors)||void 0===t?void 0:t.primary)||"#33f";return o.a.createElement(l.c,{flexDirection:"column"},o.a.createElement(l.c,{flexDirection:"row",sx:{justifyContent:"center",alignItems:"flex-end",width:u,height:"50px"}},o.a.createElement("div",{style:{width:.8*u,height:s,backgroundColor:h}})),o.a.createElement(l.c,{flexDirection:"row",sx:{justifyContent:"center",fontSize:Math.min(350/(1.5*i),12)+"px"}},n))},v=function(e){function t(){return e.apply(this,arguments)||this}return Object(r.a)(t,e),t.prototype.render=function(){if(null===this.props.data)return null;var e=this.props,t=e.data,n=e.params.nbDice,r=e.theme,a=Number(n),i=6*a-a+1,c=t.rolls,s=t.totals,u=0,h=Array(i).fill(0).map((function(e,t){var n=a+t,r=s[n]||0;return u=Math.max(u,r),{label:n,nbRolls:r}}));return o.a.createElement(l.c,{flexDirection:"column",sx:{justifyContent:"space-between",height:"140px"}},o.a.createElement(l.c,{flexDirection:"row"},c.map((function(e,t){return o.a.createElement(m,{value:e,key:"k-"+t})}))),o.a.createElement(l.c,{flexDirection:"row",sx:{alignItems:"flex-end",height:"80px"}},h.map((function(e){return o.a.createElement(g,Object.assign({},e,{key:e.label,max:u,nbValues:i,theme:r}))}))))},t}(o.a.Component);t.b=function(e){var t=Object(c.e)().theme;return o.a.createElement(o.a.Fragment,null,o.a.createElement(s.a,Object.assign({theme:t,auto:!1,controls:{param:"nbDice",minValue:1,maxValue:6,resetOnChange:!0,label:"Number of dice per roll"},updateData:d,maxTime:1e3,initData:p,initialParams:{nbDice:5}},e),o.a.createElement(v,{theme:t})))}},"2dlB":function(e,t,n){e.exports=n.p+"static/dice-2b10984d56dc4b5ad0213dc04be04471.gif"},AFNq:function(e,t,n){e.exports=n.p+"static/simple-model-112606a10d9be89ab56aa18ef510ac30.gif"},CJY9:function(e,t,n){e.exports=n.p+"static/segregation-4f3bc9a55501dca30a0df916012a0995.gif"},DsOZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return P}));var r=n("rePB"),a=n("KQm4"),i=(n("mbBF"),n("q1tI")),o=n.n(i),c=n("1uUR"),l=n("sCKr");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h={alignmentCoefficient:1,alignmentDistance:50,cohesionCoefficient:1,cohesionDistance:40,height:332,maxforce:.03,maxspeed:2,nbBoids:50,r:5,separationCoefficient:1.5,separationDistance:25,showCircles:!0,width:332},f=function(e){var t=Math.hypot.apply(Math,Object(a.a)(e));return 0===t?e:p(e,t)},d=function(e,t){return e.map((function(e){return e*t}))},p=function(e,t){return e.map((function(e){return e/t}))},m=function(e,t){return e.map((function(e,n){return e+t[n]}))},g=function(e,t){return e.map((function(e,n){return e-t[n]}))},v=function(e,t){var n=Math.hypot.apply(Math,Object(a.a)(e)),r=Math.min(n,t);return p(e,n/r)},b=function(e,t){var n=e.height,r=e.nbBoids,a=e.width;return void 0===t&&(t=Math.random),Array(r).fill(0).map((function(e){var r=2*t()*Math.PI,i=[Math.cos(r),Math.sin(r)];return{angle:r,acceleration:[0,0],position:[t()*a,t()*n],velocity:i}}))},y=function(e){var t=e.data,n=e.params,r=n.alignmentDistance,i=n.cohesionDistance,o=n.separationCoefficient,c=n.alignmentCoefficient,l=n.cohesionCoefficient,s=n.separationDistance,h=n.maxspeed,b=n.maxforce,y=n.r,O=n.height,x=n.width,k=t.map((function(e){return[0,0]})),P=t.map((function(e){return[0,0]})),j=t.map((function(e){return[0,0]}));return t.forEach((function(e,n){for(var u=0,y=0,O=0,x=0;x<t.length;x++)if(x!==n){var E=t[x],S=g(e.position,E.position),M=Math.hypot.apply(Math,Object(a.a)(S));if(M>0&&M<s){var D=p(f(S),M);k[n]=m(k[n],D),u++}M>0&&M<r&&(P[n]=m(P[n],E.velocity),y++),M>0&&M<i&&(j[n]=m(j[n],E.position),O++)}u>0&&(k[n]=p(k[n],u),k[n]=f(k[n]),k[n]=d(k[n],h),k[n]=g(k[n],e.velocity),k[n]=v(k[n],b),k[n]=d(k[n],o)),y>0&&(P[n]=p(P[n],y),P[n]=f(P[n]),P[n]=d(P[n],h),P[n]=g(P[n],e.velocity),P[n]=v(P[n],b),P[n]=d(P[n],c)),O>0&&(j[n]=p(j[n],O),j[n]=w(e.position,j[n],e.velocity,h,b),j[n]=d(j[n],l))})),t.map((function(e,t){var n=m(m(P[t],j[t]),k[t]),r=v(m(e.velocity,n),h),a=m(e.position,r),i=Math.atan2(e.velocity[1],e.velocity[0]);return a[0]<-y&&(a[0]=x+y),a[0]>x+y&&(a[0]=-y),a[1]<-y&&(a[1]=O+y),a[1]>O+y&&(a[1]=-y),u(u({},e),{},{angle:i,position:a,velocity:r})}))},w=function(e,t,n,r,a){var i=d(f(g(t,e)),r),o=g(i,n);return v(o,a)},O=function(e){var t=e.ctx,n=e.circle,r=e.data,a=e.params,i=a.alignmentDistance,o=a.cohesionDistance,c=a.separationDistance,l=a.height,s=a.showCircles,u=a.width,h=a.r;t.fillStyle="#fff",t.fillRect(0,0,u,l),r.forEach((function(e){var r=e.position,a=r[0],l=r[1],u=e.angle;t.strokeStyle="#000",t.globalAlpha=1,t.beginPath(),t.moveTo(a+Math.cos(u)*h,l+Math.sin(u)*h),t.lineTo(a+Math.cos(u+2*Math.PI/3)*h*2/3,l+Math.sin(u+2*Math.PI/3)*h*2/3),t.lineTo(a+Math.cos(u+4*Math.PI/3)*h*2/3,l+Math.sin(u+4*Math.PI/3)*h*2/3),t.closePath(),t.stroke(),s&&(t.globalAlpha=.2,t.strokeStyle="#f00",n({x:a,y:l,r:c}),t.closePath(),t.stroke(),t.strokeStyle="#0f0",n({x:a,y:l,r:i}),t.closePath(),t.stroke(),t.strokeStyle="#00f",n({x:a,y:l,r:o}),t.closePath(),t.stroke())}))},x=function(e){return o.a.createElement(c.a,Object.assign({draw:O},e))},k=function(e){return o.a.createElement(l.a,Object.assign({initialParams:h,maxTime:1/0,nocache:!0,initData:b,updateData:y,controls:[[{param:"alignmentCoefficient",label:"Alignment",minValue:0,maxValue:3,step:.01},{param:"alignmentDistance",label:"Radius",minValue:0,maxValue:50,step:1}],[{param:"cohesionCoefficient",label:"Cohesion",minValue:0,maxValue:3,step:.01},{param:"cohesionDistance",label:"Radius",minValue:0,maxValue:50,step:1}],[{param:"separationCoefficient",label:"Separation",minValue:0,maxValue:3,step:.01},{param:"separationDistance",label:"Radius",minValue:0,maxValue:50,step:1}],{param:"showCircles",label:"Show circles:",type:"toggle"}]},e),o.a.createElement(x,null))},P=function(e){return o.a.createElement(k,Object.assign({isPlaying:!0,noControls:!0},e))};t.b=k},FZVM:function(e,t,n){e.exports=n.p+"static/fibonacci-2f933d66dfe433d4547e4bfb8218779f.gif"},JKvQ:function(e,t,n){e.exports=n.p+"static/epidemic-543248eea98f59d4a14736f5d2271fbf.gif"},LLRp:function(e,t,n){e.exports=n.p+"static/percolation-bc66acc47a89ba3b5505739c37d87f08.gif"},TVkH:function(e,t,n){"use strict";n.d(t,"b",(function(){return F})),n.d(t,"a",(function(){return J})),n.d(t,"d",(function(){return U.b})),n.d(t,"e",(function(){return te})),n.d(t,"c",(function(){return _})),n.d(t,"f",(function(){return ne.b})),n.d(t,"g",(function(){return fe})),n.d(t,"h",(function(){return de.c})),n.d(t,"i",(function(){return de.a})),n.d(t,"j",(function(){return pe.e})),n.d(t,"k",(function(){return it})),n.d(t,"l",(function(){return vt})),n.d(t,"m",(function(){return gt})),n.d(t,"n",(function(){return Mt})),n.d(t,"o",(function(){return At})),n.d(t,"p",(function(){return _t})),n.d(t,"q",(function(){return en})),n.d(t,"s",(function(){return tn}));var r=n("lsXq"),a=n.n(r),i=n("+7ga"),o=n.n(i),c=n("ugLk"),l=n.n(c),s=n("YhKB"),u=n.n(s),h=n("2dlB"),f=n.n(h),d=n("JKvQ"),p=n.n(d),m=n("FZVM"),g=n.n(m),v=n("fVQo"),b=n.n(v),y=n("dVkb"),w=n.n(y),O=n("LLRp"),x=n.n(O),k=n("CJY9"),P=n.n(k),j=n("AFNq"),E=n.n(j),S=n("nA+P"),M=n.n(S),D=n("KQm4"),A=n("q1tI"),z=n.n(A),C=n("1uUR"),R=n("sCKr"),T=n("VdAu"),V={rule:110,cols:33,rows:24,firstLine:"blank"},I=function(e,t){var n=e.cols,r=e.firstLine;void 0===t&&(t=Math.random);var a=Array(n).fill(0);return a[Math.floor(a.length/2)]=1,"blank"===r?a:"full"===r?a.map((function(e){return 1})):a.map((function(e){return t()>.5?1:0}))},N=function(e){var t=e.data,n=(e.cols,e.params.rule);return t.map((function(e,r){var a=t[r-1],i=t[r],o=t[r+1];return n&1<<(a?4:0)+(i?2:0)+(o?1:0)}))},G=Object(C.i)((function(e){e.data;var t=e.cachedData,n=e.tick,r=e.params,a=r.rows,i=r.cols,o=Math.min(n,r.rows);return z.a.createElement("div",{style:{overflow:"hidden",position:"relative",height:10*a,width:10*i,margin:"0 auto"}},z.a.createElement(T.c,{direction:"column",sx:{position:"absolute",top:0}},Object(D.a)(Array(o).keys()).map((function(e){var r=n-o+e;return z.a.createElement(T.c,{direction:"row",key:"row-"+r,sx:{position:"absolute",top:10*e}},t[r].map((function(e,t){return z.a.createElement(q,{size:8,color:e?"#000":"none",key:"cell-"+t})})))}))))})),q=function(e){var t=e.color,n=e.size,r=void 0===n?12:n;return z.a.createElement(T.a,{sx:{height:r+"px",width:r+"px",bg:t,m:"1px",border:"2px solid #000"}})},B=Object(C.h)((function(e){var t=e.bit,n=e.params,r=e.setParams,a=n.rule,i=1<<t,o=i&a,c=4&t,l=2&t,s=1&t;return z.a.createElement(T.c,{flexDirection:"column",onClick:function(){r({rule:o?a-i:a+i})},alignItems:"center",sx:{mr:2,cursor:"pointer"}},z.a.createElement(T.c,{flexDirection:"row"},z.a.createElement(q,{color:c?"#000":"none"}),z.a.createElement(q,{color:l?"#000":"none"}),z.a.createElement(q,{color:s?"#000":"none"})),z.a.createElement(q,{color:o?"#000":"none"}))})),F=function(e){return z.a.createElement(R.a,Object.assign({initialParams:V,initData:I,updateData:N,controls:{param:"firstLine",label:"First line:",type:"radio",options:["blank","full","random"],resetOnChange:!0,vertical:!0}},e),z.a.createElement(T.c,{flexDirection:"column"},z.a.createElement(G,null),e.noControls?null:z.a.createElement(T.c,{flexDirection:"row",sx:{justifyContent:"space-between",my:2}},[0,1,2,3].map((function(e){return z.a.createElement(B,{bit:e,key:"bit-"+e})}))),e.noControls?null:z.a.createElement(T.c,{flexDirection:"row",sx:{justifyContent:"space-between",my:2}},[4,5,6,7].map((function(e){return z.a.createElement(B,{bit:e,key:"bit-"+e})})))))};n("RUBk"),n("mbBF");function L(e,t){return t.reduce((function(t,n){var r=n[0],a=n[1];return t+e[a][r].value}),0)}function W(e){for(var t=e.data,n=(e.tick,e.params),r=e.complete,a=JSON.parse(JSON.stringify(t)),i=0,o=n.height,c=n.width,l=n.w,s=0;s<o;s++)for(var u=0;u<c;u++){var h=t[s][u],f=h.innerNeighbors,d=h.outerNeighbors,p=L(t,f)-l*L(t,d);p>0&&(a[s][u].value=1),p<0&&(a[s][u].value=0),a[s][u]!==t[s][u]&&i++}return i<.01*o*c&&r(),a}function K(e,t){var n=e.height,r=e.width,a=e.density,i=e.innerRadius,o=e.outerRadius;void 0===t&&(t=Math.random);for(var c=[],l=0;l<n;l++){for(var s=[],u=0;u<r;u++){for(var h=[],f=[],d=Math.max(u-o,0),p=Math.min(u+o,r-1),m=Math.max(l-o,0),g=Math.min(l+o,n-1),v=d;v<p;v++)for(var b=m;b<g;b++){var y=Math.hypot(u-v,l-b);y>i&&y<=o?f.push([v,b]):y>0&&y<=i&&h.push([v,b])}var w=t()<a;s.push({value:w,innerNeighbors:h,outerNeighbors:f})}c.push(s)}return c}var H=function(e){return z.a.createElement(C.c,Object.assign({size:10,accessor:function(e){return e.value?"#000":"none"}},e))},J=function(e){return z.a.createElement(R.a,Object.assign({auto:"false",controls:[[{param:"innerRadius",minValue:1,maxValue:10,label:"Inner Radius"},{param:"outerRadius",minValue:1,maxValue:10,label:"Outer Radius"}],[{param:"w",minValue:0,maxValue:1,label:"weight",step:.01},{param:"density",minValue:0,maxValue:1,step:.1}]],initData:K,initialParams:{height:35,width:35,density:.5,innerRadius:3,outerRadius:6,w:.35},updateData:W,maxTime:200},e),z.a.createElement(H,null))},U=n("DsOZ"),Q=function(e){var t=e.angleOffset,n=e.nbAttractors,r=e.height,a=e.width,i=a/2,o=r/2,c=.95*Math.min(r,a)/2;return Object(D.a)(Array(n).keys()).map((function(e){var r=t+.5*(n+4*e)/n;return{x:i+c*Math.cos(r*Math.PI),y:o-c*Math.sin(r*Math.PI)}}))};function X(e,t){var n=e.angle,r=e.nbAttractors,a=e.height,i=e.width;void 0===t&&(t=Math.random);var o=void 0===n?2*t()*Math.PI:n,c=Q({angleOffset:o,nbAttractors:r,height:a,width:i}),l={x:t()*i,y:t()*a};return{attractors:c,background:"hsla("+Math.floor(360*t())+", 30%, 7%, 1)",color:"hsla("+Math.floor(360*t())+", 77%, 45%, 1)",points:[l],prevDirection:0}}function Y(e,t){var n=e.data,r=e.params;e.tick;void 0===t&&(t=Math.random);var a=r.nbAttractors;n.attractors.length!==a&&(n.attractors=Q(r));var i=r.rules?r.rules.split("").reduce((function(e,t,n){return"1"===t&&e.push(n),e}),[]):Object(D.a)(Array(a).keys()),o=(n.prevDirection+i[Math.floor(t()*i.length)])%a;n.prevDirection=o;var c=n.points[n.points.length-1],l=n.attractors[o],s={x:(c.x+l.x)/2,y:(c.y+l.y)/2};return n.points.push(s),n}var Z=function(e){return z.a.createElement(C.a,Object.assign({draw:$},e))};function $(e){var t=e.ctx,n=e.data,r=e.params,a=e.tick,i=e.circle,o=r.height,c=r.width;t.globalAlpha=1,t.fillStyle=n.background,t.globalCompositeOperation="source-over",t.fillRect(0,0,c,o),t.globalCompositeOperation="lighter",t.fillStyle=n.color,t.globalAlpha=.8;for(var l=0;l<a;l++){var s=n.points[l];i({x:s.x,y:s.y,r:r.r}),t.fill()}}var _=function(e){return z.a.createElement(R.a,Object.assign({ticksPerAnimation:100,maxTime:1e4,initData:X,isPlaying:!0,loop:!0,updateData:Y,initialParams:{height:332,width:332,nbAttractors:3,r:1}},e),z.a.createElement(Z,null))},ee=Object(C.h)((function(e){var t=e.params,n=e.setParams,r=t.nbAttractors,a=Math.ceil(r/5),i=function(e){return e<r?z.a.createElement(C.g,{key:"toggle-"+e,sx:{flex:"1 1 0"},checked:"1"===t.rules.charAt(e),label:e+1+(0===e?"st":1===e?"nd":"th")+" vertex",setValue:function(r){var a="1"===t.rules.charAt(e)?"0":"1",i=t.rules.slice(0,e)+a+t.rules.slice(e+1);n({rules:i})}}):null},o=Object(D.a)(Array(a).keys()).map((function(e){return z.a.createElement(T.c,{flexDirection:"row",key:"tr-"+e,sx:{justifyContent:"space-between"}},[5*e,5*e+1,5*e+2,5*e+3,5*e+4].map(i))}));return z.a.createElement(T.c,{flexDirection:"column"},z.a.createElement(C.e,{key:"range",minValue:3,maxValue:20,label:"Vertices",value:t.nbAttractors,setValue:function(e){return n({nbAttractors:e,rules:"1".repeat(e)},!0)}}),z.a.createElement(T.c,{flexDirection:"column"},o))})),te=function(e){return z.a.createElement(R.a,Object.assign({ticksPerAnimation:100,maxTime:2e4,initData:X,updateData:Y,initialParams:{height:332,width:332,nbAttractors:7,angle:0,r:1,rules:"1001100"}},e),z.a.createElement(T.c,{flexDirection:"column"},z.a.createElement(Z,null),z.a.createElement(ee,null)))},ne=n("+CGw"),re=n("dI71"),ae={sick:"#4f8c9d",recovered:"#add51f",healthy:"#997cfb",dead:"#6a9012"};function ie(e,t){var n=e.data,r=e.tick,a=e.params,i=e.complete;void 0===t&&(t=Math.random);var o=JSON.parse(JSON.stringify(n.agents)),c=0,l=0,s=0,u=0,h=a.contaminationRisk,f=a.deathRisk,d=a.r,p=a.recoveryTicks,m=a.height,g=a.width;return o.forEach((function(e,n){if("sick"===e.status&&(r>=e.recovery?e.status="recovered":t()<f&&(e.status="dead")),"dead"!==e.status){for(var a=n+1;a<o.length;a++){var i=o[a],v=i.x-e.x,b=i.y-e.y,y=Math.hypot(v,b);if(y<2*d){var w=v/y,O=b/y;e.vx=e.vx-w,e.vy=e.vy-O,i.vx=w,i.vy=O,"sick"===e.status&&"healthy"===i.status&&t()<=h&&(i.status="sick",i.recovery=r+p),"healthy"===e.status&&"sick"===i.status&&t()<=h&&(e.status="sick",e.recovery=r+p)}}e.x=e.x+e.vx,e.y=e.y+e.vy,(e.vy<0&&e.y<d||e.vy>0&&e.y>m-d)&&(e.vy=-e.vy),(e.vx<0&&e.x<d||e.vx>0&&e.x>g-d)&&(e.vx=-e.vx)}switch(e.status){case"sick":c++;break;case"healthy":l++;break;case"recovered":u++;break;case"dead":s++}})),0===c&&i(),{agents:o,sick:c,recovered:u,dead:s,healthy:l}}function oe(e,t,n){for(var r=Object(D.a)(Array(e).keys()).reduce((function(e,t){return e[t]=!0,e}),{}),a=new Set,i=0;i<t;i++){var o=Math.floor(n()*Object.keys(r).length);a.add(o),delete r[o]}return a}function ce(e,t,n,r){var a=r.x,i=r.y;return e.slice(t).filter((function(e){var t=e.x,r=e.y;return Math.hypot(t-a,r-i)<n}))}function le(e,t){var n=e.nbAgents,r=void 0===n?200:n,a=e.nbSick,i=void 0===a?5:a,o=e.maxSpeed,c=void 0===o?30:o,l=(e.contaminationRisk,e.deathRisk,e.recoveryTicks),s=void 0===l?20:l,u=e.nbDistancing,h=void 0===u?50:u,f=e.r,d=void 0===f?3:f,p=e.height,m=void 0===p?300:p,g=e.width,v=void 0===g?400:g;void 0===t&&(t=Math.random);for(var b=oe(r,i,t),y=oe(r,h,t),w=[],O=0;O<r;O++){var x=void 0,k=void 0;do{k=d/2+t()*(m-d),x=d/2+t()*(v-d)}while(ce(w,0,d,{x:x,y:k}).length);var P=b.has(O)?"sick":"healthy",j=b.has(O)?s:null,E=y.has(O),S=E?0:c,M=S*(2*t()-1),D=S*(2*t()-1);w.push({x:x,y:k,status:P,isBouncing:!1,isDistancing:E,vx:M,vy:D,recovery:j,speed:S})}return{agents:w,sick:i,healthy:r-i,dead:0,recovered:0}}var se=function(e){function t(t){var n;return(n=e.call(this,t)||this).myRef=z.a.createRef(),n}Object(re.a)(t,e);var n=t.prototype;return n.componentDidUpdate=function(){var e=this.props,t=e.data,n=e.params,r=n.width,a=n.height,i=n.r,o=this.myRef.current.getContext("2d");o.fillStyle="#fff",o.lineWidth="5px",o.clearRect(0,0,r,a),t.agents.forEach((function(e){var t=e.status,n=(e.isBouncing,e.x),r=e.y;o.beginPath(),o.fillStyle=ae[t],o.arc(n,r,i,0,2*Math.PI,!1),o.closePath(),o.fill()}))},n.render=function(){return z.a.createElement("div",null,z.a.createElement("canvas",{width:this.props.params.width,height:this.props.params.height,ref:this.myRef}))},t}(z.a.Component),ue=Object(C.i)(se),he=[{color:ae.healthy,label:"Healthy",accessor:function(e){return e.healthy}},{color:ae.sick,label:"Sick",accessor:function(e){return e.sick}},{color:ae.recovered,label:"Recovered",accessor:function(e){return e.recovered}},{color:ae.dead,label:"Dead",accessor:function(e){return e.dead}}],fe=function(e){return z.a.createElement(R.a,Object.assign({initData:le,initialParams:{nbAgents:500,nbSick:20,contaminationRisk:1,deathRisk:.001,maxSpeed:2,recoveryTicks:200,nbDistancing:0,r:2,height:332,width:332},updateData:ie,maxTime:500},e),z.a.createElement(T.c,{flexDirection:"column"},z.a.createElement(ue,null),e.hideSeries?null:z.a.createElement(C.f,{series:he,stacked:!0}),e.hideSeries?null:z.a.createElement(C.b,{series:he})))},de=n("u0c3"),pe=n("kX+8"),me=n("rePB"),ge=n("zLVn"),ve=Math.sqrt(3)/2,be=Math.PI,ye=2*Math.PI,we=function(e,t){var n=e%t;return{col:n,row:(e-n)/t}},Oe=function(e){return(e+ye)%ye},xe=function(e,t){var n=Math.min(Oe(e),Oe(t)),r=Math.max(Oe(e),Oe(t));return Oe(r-n>be?n+(r-n)/2+be:n+(r-n)/2)},ke=function(e,t){return(e+.5)*t},Pe=function(e){var t=e.ctx,n=e.x,r=e.y,a=e.r,i=e.a0,o=e.a1,c=Oe(i),l=Oe(o),s=Math.min(c,l),u=Math.max(c,l),h=Oe(u-s)>be;t.arc(n,r,a,s,u,h)},je=function(e,t,n){return Oe(t)===Oe(n)||Oe(e-t)<Oe(n-t)},Ee=function(e){return function(t){var n=t.cells,r=t.cellSize,a=t.ctx,i=t.circle,o=t.link,c=t.pathColor,l=t.pathSize,s=t.wallSize,u=n[o[0]],h=n[o[1]],f=e({cell:u,cellSize:r,wallSize:s}),d=e({cell:h,cellSize:r,wallSize:s});a.strokeStyle=c,a.fillStyle=c,i({x:f[0],y:f[1],r:l/2}),a.fill(),i({x:d[0],y:d[1],r:l/2}),a.fill(),a.lineWidth=l,a.beginPath(),a.moveTo.apply(a,Object(D.a)(f)),a.lineTo.apply(a,Object(D.a)(d)),a.closePath(),a.stroke()}};function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(n),!0).forEach((function(t){Object(me.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var De=function(e,t,n){var r=we(e,t),a=r.col,i=r.row,o=[];return a&&o.push(e-1),a<t-1&&o.push(e+1),i&&o.push(e-t),i<n-1&&o.push(e+t),o},Ae=function(e){var t=e.cell,n=e.cellSize,r=e.wallSize;return[r/2+(t.col+.5)*n,r/2+(t.row+.5)*n]},ze=Ee(Ae);function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach((function(t){Object(me.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Te=function(e,t,n){var r=we(e,t),a=r.col,i=r.row,o=[];return a&&o.push(e-1),a<t-1&&o.push(e+1),i&&(o.push(e-t),i%2?a<t-1&&o.push(e-t+1):a>0&&o.push(e-t-1)),i<n-1&&(o.push(e+t),i%2?a<t-1&&o.push(e+t+1):a>0&&o.push(e+t-1)),o},Ve=function(e){var t=e.cell,n=e.cellSize,r=e.wallSize,a=t.col,i=t.row;return[r/2+((i%2?1:.5)+a)*ve*n*2,r/2+(1+1.5*i)*n]},Ie=Ee(Ve);function Ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(n),!0).forEach((function(t){Object(me.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var qe=function(e,t,n){var r=we(e,t),a=r.col,i=r.row,o=[];return a&&o.push(e-1),a<t-1&&o.push(e+1),(a+i)%2?i&&o.push(e-t):i<n-1&&o.push(e+t),o},Be=Ee((function(e){var t=e.cell,n=e.cellSize,r=e.wallSize,a=t.col,i=t.row;return[r/2+(a+1)*n/2,r/2+(i+((i+a)%2?1/3:2/3))*ve*n]})),Fe=("0000000000000000000000000000000000000000000000000000000\n0000000000000000000000000000000000000000000000000000000\n0011110011111001110001110011111000000111001110100000100\n0010001010000010001010001000100000001000100100110001100\n0010001010000010001010001000100000001000100100101010100\n0010001010000010001010000000100000001000000100100100100\n0011110011110010001010000000100011100111000100100000100\n0010001010000011111010000000100000000000100100100000100\n0010001010000010001010001000100000001000100100100000100\n0010001010000010001010001000100000001000100100100000100\n0010001011111010001001110000100000000111001110100000100\n0000000000000000000000000000000000000000000000000000000\n0000000000000000000000000000000000000000000000000000000".split("\n").map((function(e){return e.split("").map(Number)})),function(e){return"#"+e.map((function(e){return e.toString(16).padStart(2,"0")})).join("")});"0,52,245\n0,55,243\n0,58,240\n0,60,237\n0,63,234\n0,65,231\n0,68,229\n0,70,226\n0,72,223\n0,74,220\n0,77,217\n0,79,214\n0,81,212\n0,83,209\n0,85,206\n0,87,203\n0,89,201\n0,90,198\n0,92,195\n0,94,192\n0,96,189\n0,98,187\n0,99,184\n0,101,181\n0,103,178\n0,104,176\n0,106,173\n0,108,170\n0,109,167\n0,111,165\n0,112,162\n0,113,160\n0,115,157\n0,116,154\n0,117,152\n1,118,149\n8,119,147\n14,120,145\n20,122,142\n24,123,140\n28,124,137\n32,125,135\n35,126,133\n38,127,130\n41,128,128\n43,129,126\n45,130,123\n47,131,121\n49,132,118\n51,133,116\n52,134,114\n53,135,111\n55,136,109\n56,137,106\n57,138,104\n58,139,101\n59,140,99\n59,141,96\n60,142,94\n61,143,91\n61,144,88\n62,145,86\n62,146,83\n62,147,80\n63,148,78\n63,149,75\n63,150,72\n63,152,69\n63,153,66\n63,154,63\n63,155,60\n63,156,57\n63,157,53\n63,158,50\n63,159,47\n63,160,43\n63,161,40\n64,162,36\n64,163,33\n65,164,30\n66,165,27\n68,166,24\n70,166,22\n72,167,20\n74,168,18\n77,169,16\n79,169,16\n82,170,15\n85,171,15\n87,171,15\n90,172,15\n93,172,15\n96,173,16\n98,174,16\n101,174,17\n104,175,17\n106,175,18\n109,176,18\n111,177,18\n114,177,19\n116,178,19\n119,178,20\n121,179,20\n124,180,21\n126,180,21\n129,181,22\n131,181,22\n133,182,23\n136,182,23\n138,183,24\n140,183,24\n143,184,25\n145,185,25\n147,185,26\n150,186,26\n152,186,26\n154,187,27\n156,187,27\n159,188,28\n161,188,28\n163,189,29\n165,190,29\n168,190,30\n170,191,30\n172,191,31\n174,192,31\n176,192,31\n179,193,32\n181,193,32\n183,194,33\n185,194,33\n187,195,34\n190,195,34\n192,196,35\n194,196,35\n196,197,35\n198,197,36\n200,198,36\n203,198,37\n205,199,37\n207,199,38\n209,200,38\n211,200,39\n213,201,39\n215,201,39\n218,202,40\n220,202,40\n222,203,41\n224,203,41\n226,203,42\n228,204,42\n230,204,43\n232,205,43\n234,205,43\n236,205,44\n238,205,44\n240,205,44\n242,205,44\n244,205,44\n245,205,44\n246,204,44\n248,204,44\n249,203,44\n249,202,44\n250,201,43\n251,200,43\n251,199,42\n252,197,42\n252,196,41\n252,195,41\n252,194,40\n253,192,40\n253,191,39\n253,190,39\n253,188,38\n253,187,38\n253,186,37\n254,184,37\n254,183,36\n254,181,35\n254,180,35\n254,179,34\n254,177,34\n254,176,33\n254,175,33\n255,173,32\n255,172,31\n255,170,31\n255,169,30\n255,168,30\n255,166,29\n255,165,29\n255,163,28\n255,162,28\n255,161,27\n255,159,26\n255,158,26\n255,156,25\n255,155,25\n255,153,24\n255,152,24\n255,150,23\n255,149,22\n255,147,22\n255,146,21\n255,145,21\n255,143,20\n255,142,20\n255,140,19\n255,139,18\n255,137,18\n255,136,17\n255,134,17\n255,132,16\n255,131,16\n255,129,15\n255,128,14\n255,126,14\n255,125,13\n255,123,13\n255,121,12\n255,120,11\n255,118,11\n255,116,10\n255,115,10\n255,113,9\n255,111,8\n255,110,8\n255,108,7\n255,106,7\n255,105,6\n255,103,6\n255,101,5\n255,99,5\n255,97,4\n255,95,4\n255,94,3\n255,92,3\n255,90,3\n255,88,2\n254,86,2\n254,84,2\n254,82,1\n254,79,1\n254,77,1\n254,75,0\n254,73,0\n254,70,0\n254,68,0\n253,65,0\n253,63,0\n253,60,0\n253,57,0\n253,54,0\n253,51,0\n253,48,0".split("\n").map((function(e){return Fe(e.split(",").map(Number))}));function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function We(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(n),!0).forEach((function(t){Object(me.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ke=["cells","links","stack","visited"],He=["drawItem","height","width","grid","ticksPerAnimation"],Je=["cells","links"],Ue=["cell","ctx","grid"],Qe=["cells","ctx","circle","grid","link"];function Xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(n),!0).forEach((function(t){Object(me.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ze=["square","hexagonal","triangular","circle"],$e={drawItem:!0,useColor:!1,width:332,height:332,grid:"square",cellSize:10,wallColor:"#000",pathColor:"#fff",maxTime:1/0,ticksPerAnimation:20},_e=function(e,t){var n=e.cellSize,r=e.height,a=e.width,i=e.grid;return void 0===t&&(t=Math.random),"circle"===i?function(e,t){var n=e.height,r=e.width;void 0===t&&(t=Math.random);for(var a=Math.max(5,Math.min(10,Math.min(n,r)/20)),i=.6*a,o=.4*a,c=Math.floor(Math.min(n,r)/2/a),l={"0-0":{id:"0-0",layer:0,cell:0,startAngle:0,midangle:be,endAngle:ye,neighbors:[]}},s=1,u=1;u<c;u++){for(var h=ye*ke(u,a),f=Math.floor(h/(3*a)),d=ye*t()/f,p=0,m=u-1+"-"+p;!je(d,l[m].startAngle,l[m].endAngle);)m=u-1+"-"+(p=(p+1)%s);for(var g=0;g<f;g++){var v=d+ye/f,b=d+ye/(3*f),y=u+"-"+g,w={id:y,layer:u,cell:g,startAngle:d,midAngle:b,endAngle:v,startAngleDeg:180*d/be,endAngleDeg:180*v/be,neighbors:[].concat(2===f?[u+"-"+(g+1)%f]:[u+"-"+(f+g-1)%f,u+"-"+(g+1)%f])};je(l[m].endAngle,b,v)&&(w.neighbors.push(m),l[m].neighbors.push(y)),je(l[m].endAngle,d,v)&&je(l[m=u-1+"-"+(p=(p+1)%s)].endAngle,d,v)&&(w.neighbors.push(m),l[m].neighbors.push(y)),l[y]=w,d=v}s=f}return{cells:l,cellSize:a,pathSize:i,wallSize:o,links:[],visited:new Set(["0-0"]),currentCell:"0-0",stack:["0-0"]}}({cellSize:n,height:r,width:a},t):"square"===i?function(e){var t=e.height,n=e.width,r=(e.grid,Math.max(5,Math.min(10,Math.min(t,n)/20))),a=.8*r,i=.2*r,o=Math.floor(t/r),c=Math.floor(n/r),l=o*c,s=Object(D.a)(Array(l).keys()).reduce((function(e,t){return e[t]=Me(Me({id:t},we(t,c)),{},{neighbors:De(t,c,o)}),e}),{});return{cellSize:r,wallSize:i,pathSize:a,rows:o,cols:c,cells:s,links:[],visited:new Set([0]),currentCell:0,stack:[0]}}({cellSize:n,height:r,width:a}):"hexagonal"===i?function(e){var t=e.height,n=e.width,r=Math.max(5,Math.min(10,Math.min(t,n)/20)),a=.8*r,i=.1*r,o=Math.floor(4*t/(6*r)-.5),c=Math.floor(n/(2*r*ve)-.5),l=o*c,s=Object(D.a)(Array(l).keys()).reduce((function(e,t){return e[t]=Re(Re({id:t},we(t,c)),{},{neighbors:Te(t,c,o)}),e}),{});return{cellSize:r,pathSize:a,wallSize:i,rows:o,cols:c,cells:s,links:[],visited:new Set([0]),currentCell:0,stack:[0]}}({cellSize:n,height:r,width:a}):"triangular"===i?function(e){var t=e.height,n=e.width,r=Math.max(10,Math.min(10,Math.min(t,n)/20)),a=.5*r,i=.2*r,o=Math.floor(t/(r*ve)),c=Math.floor(2*n/r)-1,l=o*c,s=Object(D.a)(Array(l).keys()).reduce((function(e,t){return e[t]=Ge(Ge({id:t},we(t,c)),{},{neighbors:qe(t,c,o)}),e}),{});return{cellSize:r,pathSize:a,wallSize:i,rows:o,cols:c,cells:s,links:[],visited:new Set([0]),currentCell:0,stack:[0]}}({cellSize:n,height:r,width:a}):void 0},et=function(e,t){void 0===t&&(t=Math.random);var n,r=e.data,a=r.cells,i=r.links,o=r.stack,c=r.visited,l=Object(ge.a)(r,Ke),s=(e.params,e.complete),u=[];if(c.size===Object.values(a).length||0===o.length)s();else{for(;0===u.length&&o.length;)u=a[n=o.pop()].neighbors.filter((function(e){return!c.has(e)}));var h=u[Math.floor(t()*u.length)];c.add(h),i.push([n,h]),o.push(n),o.push(h)}return Ye(Ye({},l),{},{cells:a,links:i,stack:o,visited:c})},tt=function(e){var t=e.params,n=t.drawItem,r=t.height,a=t.width,i=t.grid,o=t.ticksPerAnimation,c=Object(ge.a)(t,He),l=e.data,s=l.cells,u=l.links,h=Object(ge.a)(l,Je),f=e.tick,d=e.circle,p=e.ctx,m=c.wallColor||h.wallColor;if(0===f)n?(p.clearRect(0,0,r,a),Object.values(s).forEach((function(e){return nt(Ye(Ye({cell:e,circle:d,ctx:p,grid:i,height:r,width:a},c),h))}))):(p.fillStyle=m,p.fillRect(0,0,a,r));else for(var g=f-o;g<f;g++)rt(Ye(Ye({cells:s,circle:d,ctx:p,grid:i,height:r,width:a,tick:g,link:u[g]},c),h))},nt=function(e){var t=e.cell,n=e.ctx,r=e.grid,a=Object(ge.a)(e,Ue);return"circle"===r&&function(e){var t=e.cell,n=e.circle,r=e.ctx,a=e.cellSize,i=e.pathColor,o=e.pathSize,c=e.wallColor,l=e.wallSize,s=e.height,u=e.width;if(void 0!==t.layer){var h=u/2,f=s/2;if("0-0"===t.id)return r.fillStyle=i,r.strokeStyle=c,r.lineWidth=l,n({x:h,y:f,r:a}),r.fill(),void r.stroke();var d=t.layer,p=be*ke(d,a),m=be*l/2/p;r.strokeStyle=c,r.lineWidth=a,r.beginPath(),Pe({ctx:r,x:h,y:f,r:ke(d,a),a0:t.startAngle,a1:t.endAngle}),r.stroke(),r.strokeStyle=i,r.lineWidth=o,r.beginPath(),Pe({ctx:r,x:h,y:f,r:ke(d,a),a0:t.startAngle+m,a1:t.endAngle-m}),r.stroke()}}(Ye({cell:t,ctx:n},a)),"hexagonal"===r&&function(e){var t=e.cell,n=e.ctx,r=e.cellSize,a=e.wallColor,i=e.wallSize,o=Ve({cell:t,cellSize:r,wallSize:i});n.strokeStyle=a,n.lineWidth=i,n.beginPath(),n.moveTo(o[0],o[1]-r),n.lineTo(o[0]-ve*r,o[1]-.5*r),n.lineTo(o[0]-ve*r,o[1]+.5*r),n.lineTo(o[0],o[1]+r),n.lineTo(o[0]+ve*r,o[1]+.5*r),n.lineTo(o[0]+ve*r,o[1]-.5*r),n.closePath(),n.stroke()}(Ye({cell:t,ctx:n},a)),"square"===r&&function(e){var t=e.cell,n=e.ctx,r=e.cellSize,a=e.wallColor,i=e.wallSize,o=Ae({cell:t,cellSize:r,wallSize:i});n.strokeStyle=a,n.lineWidth=i,n.strokeRect(o[0]-.5*r,o[1]-.5*r,r,r)}(Ye({cell:t,ctx:n},a)),"triangular"===r&&function(e){var t=e.cell,n=e.ctx,r=e.cellSize,a=e.wallColor,i=e.wallSize;n.strokeStyle=a,n.lineWidth=i;var o=t.col,c=t.row,l=(o+c)%2;n.beginPath(),l?(n.moveTo(i/2+o*r/2,i/2+c*r*ve),n.lineTo(i/2+(o+2)*r/2,i/2+c*r*ve),n.lineTo(i/2+(o+1)*r/2,i/2+(c+1)*r*ve)):(n.moveTo(i/2+o*r/2,i/2+(c+1)*r*ve),n.lineTo(i/2+(o+2)*r/2,i/2+(c+1)*r*ve),n.lineTo(i/2+(o+1)*r/2,i/2+c*r*ve)),n.closePath(),n.stroke()}(Ye({cell:t,ctx:n},a)),null},rt=function(e){var t=e.cells,n=e.ctx,r=e.circle,a=e.grid,i=e.link,o=Object(ge.a)(e,Qe);void 0!==i&&("square"===a&&ze(Ye({cells:t,ctx:n,circle:r,link:i},o)),"hexagonal"===a&&Ie(Ye({cells:t,ctx:n,circle:r,link:i},o)),"triangular"===a&&Be(Ye({cells:t,ctx:n,circle:r,link:i},o)),"circle"===a&&function e(t){var n=t.cells,r=t.cellSize,a=t.ctx,i=t.circle,o=t.height,c=t.width,l=t.link,s=t.pathColor,u=t.pathSize,h=n[l[0]];if(0===h.layer)return e({cells:n,cellSize:r,ctx:a,circle:i,height:o,width:c,link:[l[1],l[0]],pathColor:s,pathSize:u});a.save();var f=n[l[1]],d=c/2,p=o/2;a.strokeStyle=s,a.fillStyle=s,a.lineCap="round",a.lineWidth=u;var m=(h.startAngle+h.endAngle)/2;if(0===f.layer){a.beginPath(),a.moveTo(d,p);var g=d+Math.cos(m)*ke(h.layer,r),v=p+Math.sin(m)*ke(h.layer,r);return a.lineTo(g,v),a.stroke(),a.beginPath(),i({x:d,y:p,r:u/2}),a.fill(),i({x:g,y:v,r:u/2}),a.fill(),void a.restore()}var b=(f.startAngle+f.endAngle)/2;if(h.layer===f.layer){a.beginPath();var y=ke(h.layer,r);Pe({ctx:a,x:d,y:p,r:y,a0:m,a1:b}),a.stroke();var w=d+Math.cos(m)*y,O=p+Math.sin(m)*y,x=d+Math.cos(b)*y,k=p+Math.sin(b)*y;return a.beginPath(),i({x:w,y:O,r:u/2}),a.fill(),i({x:x,y:k,r:u/2}),a.fill(),void a.restore()}var P=m<b?We(We({},h),{},{midAngle:m}):We(We({},f),{},{midAngle:b}),j=m<b?We(We({},f),{},{midAngle:b}):We(We({},h),{},{midAngle:m}),E=ke(P.layer,r),S=ke(j.layer,r),M=je(j.midAngle,P.midAngle,P.endAngle)?xe(P.midAngle,j.midAngle):xe(j.startAngle,P.endAngle);a.beginPath(),Pe({ctx:a,x:d,y:p,r:E,a0:P.midAngle,a1:M}),a.stroke(),a.beginPath(),a.moveTo(d+Math.cos(M)*E,p+Math.sin(M)*E),a.lineTo(d+Math.cos(M)*S,p+Math.sin(M)*S),a.stroke(),a.beginPath(),Pe({ctx:a,x:d,y:p,r:S,a0:M,a1:j.midAngle}),a.stroke();var D=d+Math.cos(P.midAngle)*E,A=p+Math.sin(P.midAngle)*E,z=d+Math.cos(j.midAngle)*S,C=p+Math.sin(j.midAngle)*S;i({x:D,y:A,r:u/2}),a.fill(),i({x:z,y:C,r:u/2}),a.fill(),a.restore()}(Ye({cells:t,ctx:n,circle:r,link:i},o)))},at=function(e){return z.a.createElement(C.a,Object.assign({draw:tt},e))},it=function(e){return z.a.createElement(C.d,Object.assign({initialParams:Ye(Ye({},$e),e.extraParams),initData:_e,updateData:et,controls:{type:"radio",vertical:!0,options:Ze,param:"grid",resetOnChange:!0}},e),z.a.createElement(at,null))},ot="PENDING",ct="SUCCESS",lt="FAILURE";function st(e){var t=e.data,n=e.params,r=e.complete,a=t.queue,i=t.grid,o=n.height,c=t.status;0===a.length&&(c=lt);for(var l=[];a.length>0&&c===ot;){var s=a.shift(),u=s.x,h=s.y;h===o-1?c=ct:0===i[h+1][u]&&(i[h+1][u]=6,l.push({x:u,y:h+1})),0===i[h][u-1]&&(i[h][u-1]=7,l.push({x:u-1,y:h})),0===i[h][u+1]&&(i[h][u+1]=8,l.push({x:u+1,y:h}))}return c!==ot&&n.shouldComplete&&r(c),{grid:i,queue:l,status:c}}function ut(e){var t=e.data,n=e.params,r=e.complete,a=0;return t.grids.forEach((function(e,r){return e.forEach((function(e,i){if(e.status===ot){var o=st({data:e,params:{height:n.height,shouldComplete:!1}});t.grids[r][i]=o,o.status===ot&&a++,o.status===ct&&t.cols[i].result++}}))})),0===a&&r(),t}function ht(e,t){var n=e.porosity,r=e.height,a=e.width;void 0===t&&(t=Math.random);var i,o,c=[],l=[];for(o=0;o<r;o++){var s=[];for(i=0;i<a;i++)s.push(t()>Number(n)?1:0);c.push(s)}for(o=0;o<r;o++)for(i=0;i<a;i++)c[o][i]?(c[o+1]&&c[o+1][i]&&(c[o][i]=c[o][i]+2),c[o][i+1]&&(c[o][i]=c[o][i]+1),4===c[o][i]&&c[o+1][i+1]&&(c[o][i]=5)):0===o&&(c[o][i]=6,l.push({x:i,y:o}));return{grid:c,queue:l,status:ot}}function ft(e){var t=e.ctx,n=e.params,r=n.cellSize,a=n.margin,i=n.height,o=n.width,c=e.data,l=e.roundRectangle;t.fillStyle="beige",t.fillRect(0,0,o*r,i*r),c.grid.forEach((function(e,n){e.forEach((function(e,i){var o=i*r,c=n*r;e>=1&&e<=5&&(t.fillStyle="#777",l({ctx:t,x:o+a,y:c+a,r:a,height:r-2*a,width:r-2*a}),t.fill(),2!==e&&4!==e&&5!==e||t.fillRect(o+r-2*a,c+a,4*a,r-2*a),3!==e&&4!==e&&5!==e||t.fillRect(o+a,c+r-2*a,r-2*a,4*a),5===e&&t.fillRect(o+r-2*a,c+r-2*a,4*a,4*a)),e>=6&&(t.lineWidth=r-2*a,t.strokeStyle="cyan",t.lineCap="round",t.beginPath(),t.moveTo(o+r/2,c+r/2),6===e&&t.lineTo(o+r/2,Math.max(c-r/2,0)),8===e&&t.lineTo(o-r/2,c+r/2),7===e&&t.lineTo(o+3*r/2,c+r/2),t.stroke())}))}))}var dt=function(e){var t=e.data,n=e.params,r=n.cellSize,a=n.height,i=n.width;return z.a.createElement("div",{style:{boxSizing:"content-box",height:r*a,width:r*i,border:"3px solid "+(t.status===ot?"transparent":t.status===ct?"#33e":"#777")}},z.a.createElement(C.a,{data:t,width:i*r,height:a*r,draw:ft}))},pt=function(e){var t=e.data,n=e.params,r=n.height*n.cellSize,a=n.width*n.cellSize;return z.a.createElement("div",{style:{display:"flex",margin:"0 auto",flexDirection:"column",height:(r+10)*n.rows+60,width:(a+10)*n.cols+10}},z.a.createElement(T.c,{flexDirection:"row",sx:{justifyContent:"space-around",width:"100%"}},t.cols.map((function(e){return z.a.createElement(T.a,{sx:{width:[a],fontSize:1,textAlign:"center",fontWeight:2}},e.p.toFixed(2))}))),z.a.createElement(T.c,{sx:{flexDirection:"column",justifyContent:"space-around",height:(r+10)*n.rows}},t.grids.map((function(e,t){return z.a.createElement(T.c,{sx:{flexDirection:"row",justifyContent:"space-around"},key:"row-"+t},e.map((function(e,r){return z.a.createElement(T.c,{sx:{height:n.height*n.cellSize,width:n.width*n.cellSize}},z.a.createElement(dt,{key:"cell-"+r+"-"+t,data:e,params:n}))})))}))),z.a.createElement(T.c,{flexDirection:"row",sx:{justifyContent:"space-around"}},t.cols.map((function(e){return z.a.createElement(T.a,{sx:{width:[a],fontSize:1,textAlign:"center"}},e.result+"/"+e.total)}))))};function mt(e,t){var n=e.width,r=e.height,a=(e.cellSize,e.margin,e.rows),i=e.cols,o=e.minP,c=e.stepP;void 0===t&&(t=Math.random);var l=Object(D.a)(Array(i).keys());return{cols:l.map((function(e){return{p:o+e*c,result:0,total:a}})),grids:Object(D.a)(Array(a).keys()).map((function(e){return l.map((function(e){return ht({height:r,width:n,porosity:o+e*c},t)}))}))}}var gt=function(e){return z.a.createElement(z.a.Fragment,null,z.a.createElement(R.a,Object.assign({auto:!1,updateData:ut,maxTime:1/0,initData:mt,initialParams:{width:20,height:20,cellSize:1.5,margin:0,rows:10,cols:8,minP:.54,stepP:.02}},e),z.a.createElement(pt,null)))},vt=function(e){return z.a.createElement(z.a.Fragment,null,z.a.createElement(R.a,Object.assign({auto:!1,controls:{param:"porosity",label:"Porosity",minValue:0,maxValue:1,step:.01},updateData:st,maxTime:1/0,initData:ht,initialParams:{width:66,height:66,cellSize:5,margin:0,porosity:.6,shouldComplete:!0}},e),z.a.createElement(dt,null)))};function bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(n),!0).forEach((function(t){Object(me.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wt=function(e,t){void 0===t&&(t=Math.random);var n=e.cols,r=e.rows,a=e.proportion,i=e.tolerance,o=Array(r).fill(0).map((function(e){return Array(n).fill(0).map((function(e){return{community:100*t()>a?1:0}}))}));o.forEach((function(e,t){return e.forEach((function(e,n){e.isHappy=Ot(o,n,t,i)}))}));var c=function(e,t){return e.reduce((function(n,r,a){return r.reduce((function(n,r,i){return n+Ot(e,i,a,t)}),n)}),0)}(o,i);return{grid:o,happy:c,happiness:c/(n*r),totalMoves:0}};function Ot(e,t,n,r){var a=function(e,t,n){var r=e.length,a=e[0].length,i=0===n||n===r-1;return 0===t||t===a-1?i?3:5:i?5:8}(e,t,n);return(a-function(e,t,n){var r=e[n][t].community;return[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]].reduce((function(a,i){var o=t+i[0],c=n+i[1];(function(e,t,n){if(!e)return!1;var r=e.length;if(n<0||n>=r)return!1;var a=e[0].length;if(t<0||t>=a)return!1;return!0})(e,o,c)&&(e[c][o].community===r&&(a+=1));return a}),0)}(e,t,n))/a<r/100}var xt=function(e,t){var n=e.data,r=e.params,a=e.complete;void 0===t&&(t=Math.random);var i=r.cols,o=r.rows,c=r.threshold,l=r.tolerance,s=[],u=0,h=n.totalMoves,f=JSON.parse(JSON.stringify(n.grid));for(f.forEach((function(e,t){return e.forEach((function(e,n){e.prevX=n,e.prevY=t,Ot(f,n,t,l)?(u+=1,e.isHappy=1):(e.isHappy=0,s.push([n,t]))}))})),u>i*o*c/100&&a();s.length>1;){var d=s.shift(),p=Math.floor(t()*s.length),m=s[p],g=yt({},f[d[1]][d[0]]);f[d[1]][d[0]]=yt({},f[m[1]][m[0]]),f[m[1]][m[0]]=g,h+=2,s=s.slice(0,p).concat(s.slice(p+1))}return{grid:f,totalMoves:h,happy:u,happiness:u/(i*o)}},kt=function(e){var t=e.ctx,n=e.data,r=e.params,a=e.circle,i=r.height,o=r.width,c=r.rows,l=r.cols,s=r.showmoves,u=i/c,h=o/l,f=.8*Math.min(u,h);t.clearRect(0,0,o,i),t.strokeStyle="#000",t.lineWidth=2,t.globalAlpha=1,n.grid.forEach((function(e,n){return e.forEach((function(e,r){if(0===e.community)t.fillStyle="#33e",a({x:(r+.5)*u,y:(n+.5)*h,r:f/2}),e.isHappy?t.fill():t.stroke();else{t.fillStyle="#a0c";var i=(r+.5)*u-f/2,o=(n+.5)*h-f/2;e.isHappy?t.fillRect(i,o,f,f):t.strokeRect(i,o,f,f)}}))})),s&&(t.strokeStyle="#222",t.fillStyle="#222",t.globalAlpha=.5,t.lineWidth=1,n.grid.forEach((function(e,n){e.forEach((function(e,r){if(void 0!==e.prevX){var i=e.prevX,o=e.prevY;if(i!==r||o!==n){var c=u*(i+.5),l=u*(r+.5),s=h*(o+.5),d=h*(n+.5);t.moveTo(c,s),t.lineTo(l,d),t.stroke(),a({x:c,y:s,r:f/4}),t.fill(),a({x:l,y:d,r:f/4}),t.fill()}}}))})))},Pt=function(e){return z.a.createElement(C.a,Object.assign({draw:kt},e))},jt={label:"Happiness",accessor:function(e){return e.happy}},Et=[{label:"Happiness",accessor:function(e){return Math.floor(1e3*Number(e.happiness.toFixed(3)))/10+"%"}},{label:"Total moves",accessor:function(e){return e.totalMoves}}],St={cols:20,rows:20,height:330,width:330,tolerance:60,proportion:50,showmoves:!0,threshold:99},Mt=function(e){return z.a.createElement(R.a,Object.assign({initialParams:yt(yt({},St),e.extraParams),initData:wt,updateData:xt,maxTime:50,delay:100,controls:[{param:"tolerance",label:"Tolerance"},{param:"proportion",label:"Proportion"},{param:"threshold",label:"Threshold"},{param:"showmoves",label:"Show moves",type:"toggle"}]},e),z.a.createElement(T.c,{flexDirection:"column"},z.a.createElement(Pt,null),z.a.createElement(C.f,{series:jt}),z.a.createElement(C.b,{series:Et})))},Dt=function(e){var t=e.tick,n=Array(10).fill(0).map((function(e,n){return Array(10).fill(0).map((function(e,r){return 10*n+r>t?0:1}))}));return z.a.createElement(C.c,{data:n,size:36})},At=function(e){return z.a.createElement(R.a,e,z.a.createElement(Dt,null))},zt=[0,1,2,3],Ct=[2,3,0,1],Rt=[[0,-1],[1,0],[0,1],[-1,0]],Tt=Rt.reduce((function(e,t,n){return e[t]=n,e}),{});function Vt(e,t,n){return void 0===n&&(n=Math.random),e+Math.floor(n()*(t+1-e))}function It(e,t,n,r,a){return!(e<0||e>a-1||t<0||t>r-1)&&!n[[e,t]]}function Nt(e,t){void 0===e&&(e=[[]]),void 0===t&&(t=[]);var n=e.reduce((function(e,t,n){return t.reduce((function(e,t,r){return t>0&&(e[[r,n]]=!0),e}),e)}),{});return t.forEach((function(e){var t=e[0],r=e[1];return n[[t,r]]=!0})),n}function Gt(e){var t=e.grid,n=e.start,r=e.end,a=t.length;if(0===a)return[];var i=t[0].length,o=Nt(t);delete o[r];var c={},l=[n];c[n]=[n];for(var s=!1,u=function(){var e=l.shift();zt.forEach((function(t){var n=[e[0]+Rt[t][0],e[1]+Rt[t][1]],u=n[0],h=n[1];It(u,h,o,a,i)&&(o[n]=!0,c[n]=c[e].concat([n]),u===r[0]&&h===r[1]&&(s=!0),l.push(n))}))};l.length&&!s;)u();return c[r]}function qt(e){var t=e.grid,n=e.start,r=e.end,a=t.length;if(0===a)return[];for(var i=t[0].length,o=Gt({grid:t,start:n,end:r})||[n],c=Nt(t,o),l=[o.shift()];o.length;){var s=Bt({height:a,longestPath:l,stack:o,visited:c,width:i});o=s.stack,c=s.visited,l=s.longestPath}return l}function Bt(e){var t=e.height,n=e.longestPath,r=e.stack,a=e.visited,i=e.width,o=n[n.length-1];a[o]=!0;var c=r.shift(),l=c[0]-o[0],s=c[1]-o[1],u=[[o[0]-s,o[1]-l],[c[0]-s,c[1]-l]],h=[[o[0]+s,o[1]+l],[c[0]+s,c[1]+l]];return It.apply(void 0,Object(D.a)(u[0]).concat([a,t,i]))&&It.apply(void 0,Object(D.a)(u[1]).concat([a,t,i]))?(r.unshift(c),r.unshift(u[1]),r.unshift(u[0]),a[u[0]]=!0,a[u[1]]=!0):It.apply(void 0,Object(D.a)(h[0]).concat([a,t,i]))&&It.apply(void 0,Object(D.a)(h[1]).concat([a,t,i]))?(r.unshift(c),r.unshift(h[1]),r.unshift(h[0]),a[h[0]]=!0,a[h[1]]=!0):n.push(c),{stack:r,visited:a,longestPath:n,considered:[o,c]}}function Ft(e){var t,n=e.grid,r=e.path,a=void 0===r?[]:r,i=e.direction,o=e.stack,c=void 0===o?[]:o,l=[].concat(Object(D.a)(a),Object(D.a)(c)),s=n.map((function(e){return e.map((function(e){return e?i:void 0}))}));if(l.length<2)return s;for(var u=1;u<l.length;u++){var h=l[u-1],f=(t=l[u])[0]-h[0],d=t[1]-h[1],p=h[0];s[h[1]][p]=Tt[[f,d]]}if(i){var m=t,g=m[0];s[m[1]][g]=i}return s}function Lt(e,t){void 0===t&&(t=Math.random);var n=e.reduce((function(e,t,n){return t.reduce((function(e,t,r){return 0===t&&e.push([r,n]),e}),e)}),[]);return 0===n.length?null:n[Math.floor(t()*n.length)]}var Wt=function(e){var t=e.ctx,n=e.circle,r=e.data,a=e.params,i=a.cellSize,o=a.displayGrid,c=a.displayHead,l=a.displayCircuit,s=a.width,u=a.height,h=e.height,f=e.width,d=e.roundRectangle,p=e.theme,m=(e.tick,p.colors),g=m.accent,v=(m.muted,m.primary),b=m.secondary,y=m.gray,w=r.bestPath,O=r.considered,x=r.snakePath,k=void 0===x?[]:x,P=r.actionGrid,j=r.direction,E=void 0===j?0:j,S=r.fruit;if(t.clearRect(0,0,f,h),o){t.strokeStyle=y;for(var M=0;M<u;M++)for(var D=0;D<s;D++)t.strokeRect(D*i,M*i,i,i)}l&&(t.strokeStyle=w?g:b,Kt({actionGrid:P,cellSize:i,circle:n,considered:O,ctx:t})),S&&(t.fillStyle=b,t.fillRect((S[0]+.2)*i,(S[1]+.2)*i,.6*i,.6*i)),k.forEach((function(e,r){var a=k[r+1],o=e[0],l=e[1];if(t.fillStyle=v,a){var s=a[0],u=a[1],h=i*(Math.min(s,o)+(1-.8)/2),f=i*(Math.min(u,l)+(1-.8)/2);d({x:h,y:f,width:i*(o===s?.8:1.8),height:i*(l===u?.8:1.8),r:i/2}),t.fill()}else if(c){var p=(o+.5)*i,m=(l+.5)*i,g=.8*i/2;n({x:p,y:m,r:g}),t.fill(),t.fillStyle="#fff";k[r-1];switch(E){case 0:n({x:p-.5*g,y:m-.5*g,r:2}),t.fill(),n({x:p+.5*g,y:m-.5*g,r:2}),t.fill();break;case 2:n({x:p-.5*g,y:m+.5*g,r:2}),t.fill(),n({x:p+.5*g,y:m+.5*g,r:2}),t.fill();break;case 3:n({x:p-.5*g,y:m-.5*g,r:2}),t.fill(),n({x:p-.5*g,y:m+.5*g,r:2}),t.fill();break;case 1:n({x:p+.5*g,y:m-.5*g,r:2}),t.fill(),n({x:p+.5*g,y:m+.5*g,r:2}),t.fill()}}}))},Kt=function(e){var t=e.actionGrid,n=e.cellSize,r=e.circle,a=e.considered,i=e.ctx;function o(e,t){i.beginPath(),i.moveTo(t*n,(e+.5)*n),i.lineTo((t+1)*n,(e+.5)*n),i.stroke()}function c(e,t){i.beginPath(),i.moveTo((t+.5)*n,e*n),i.lineTo((t+.5)*n,(e+1)*n),i.stroke()}function l(e,t){i.beginPath(),i.arc(t*n,e*n,n/2,0,Math.PI/2,!1),i.stroke()}function s(e,t){i.beginPath(),i.arc((t+1)*n,e*n,n/2,Math.PI/2,Math.PI,!1),i.stroke()}function u(e,t){i.beginPath(),i.arc(t*n,(e+1)*n,n/2,-Math.PI/2,0,!1),i.stroke()}function h(e,t){i.beginPath(),i.arc((t+1)*n,(e+1)*n,n/2,Math.PI,-Math.PI/2,!1),i.stroke()}a&&a.forEach((function(e){var t=e[0],a=e[1];r({x:(t+.5)*n,y:(a+.5)*n,r:n/4}),i.stroke()})),t.forEach((function(e,n){e.forEach((function(e,r){switch(e){case 0:r>0&&1===t[n][r-1]?l(n,r):3===t[n][r+1]?s(n,r):c(n,r);break;case 2:r>0&&1===t[n][r-1]?u(n,r):3===t[n][r+1]?h(n,r):c(n,r);break;case 1:n>0&&2===t[n-1][r]?s(n,r):t[n+1]&&0===t[n+1][r]?h(n,r):o(n,r);break;case 3:n>0&&2===t[n-1][r]?l(n,r):t[n+1]&&0===t[n+1][r]?u(n,r):o(n,r)}}))}))},Ht=Object(C.j)((function(e){var t=e.params,n=t.height,r=t.width,a=t.cellSize;return z.a.createElement(C.a,Object.assign({draw:Wt},e,{height:n*a,width:r*a}))}));function Jt(e,t){var n=e.directionRandom,r=e.directionText,a=e.height,i=e.width,o=e.initialLength,c=e.snakePosRandom,l=e.xHead,s=e.yHead;void 0===t&&(t=Math.random);var u=n?Math.floor(4*t()):{up:0,right:1,down:2,left:3}[r],h=1===u?o+2:2,f=i-1-(3===u?o+2:2),d=2===u?o+2:2,p=a-1-(0===u?o+2:2);c?(l=Vt(h,f,t),s=Vt(d,p,t)):(l=Math.min(f,Math.max(h,l)),s=Math.min(p,Math.max(d,s)));for(var m=[],g=0;g<a;g++){for(var v=[],b=0;b<i;b++)v.push(0);m.push(v)}for(var y=[l,s],w=[],O=[],x=0;x<o;x++){var k=l+x*Rt[Ct[u]][0],P=s+x*Rt[Ct[u]][1];m[P][k]=x+1,O.unshift([k,P]),w=[k,P]}return{behindTail:[w[0]+Rt[Ct[u]][0],w[1]+Rt[Ct[u]][1]],direction:u,frontOfSnake:[l+Rt[u][0],s+Rt[u][1]],grid:m,length:o,head:y,snakePath:O,tail:w}}function Ut(e,t){void 0===t&&(t=Math.random);var n=Jt(e,t),r=n.grid,a=n.head,i=n.tail,o=n.direction,c=n.snakePath,l=Gt({grid:r,start:a,end:i,direction:o}),s=Nt(r,l),u=[].concat(Object(D.a)(c),[l.shift()]);return{actionGrid:Ft({grid:r,path:u,stack:l,direction:o}),direction:o,grid:r,stack:l,visited:s,longestPath:u}}function Qt(e,t){void 0===t&&(t=Math.random);var n=Jt(e,t),r=n.grid,a=n.head,i=n.tail,o=n.direction,c=n.length,l=n.snakePath,s=Lt(r,t);return{head:a,grid:r,direction:o,actionGrid:Ft({grid:r,path:qt({grid:r,start:a,end:i}),direction:o}),fruit:s,length:c,snakePath:l,bestPath:!1}}function Xt(e,t){var n,r=e.data,a=e.params,i=e.complete;void 0===t&&(t=Math.random);for(var o=r.actionGrid,c=r.bestPath,l=r.grid,s=r.direction,u=r.head,h=r.fruit,f=r.length,d=o,p=c,m=a.fruitGrowth,g=a.height,v=a.width,b=a.safeMode,y=[],w=l.map((function(e,t){return e.map((function(e,n){return 0===e||e+1>f?0:(y[f-e-1]=[n,t],e+1)}))}));void 0===y[0];)y.shift();var O=y[0],x=[u[0]+Rt[s][0],u[1]+Rt[s][1]];(0!==w[x[1]][x[0]]||x[0]>=v||x[0]<0||x[1]>=g||x[1]<0)&&i(),w[x[1]][x[0]]=1,w.every((function(e){return e.every((function(e){return e}))}))&&i();var k=f,P=h?[h[0],h[1]]:[-1,-1];if(x[0]===P[0]&&x[1]===P[1]&&(k=Math.min(g*v,k+m),b||(p=!1),P=Lt(w,t)),!1===p){var j=Gt({grid:l,start:x,end:P,direction:s});if(j){var E=[].concat(y,Object(D.a)(j)),S=qt({grid:function(e,t){var n=e.map((function(e){return e.map((function(e){return e}))}));return t.forEach((function(e){var t=e[0],r=e[1];return n[r][t]=1})),n}(w,E),start:P,end:O});new Set([].concat(Object(D.a)(E),Object(D.a)(S)).map((function(e){return e.join()}))).size===g*v&&(d=Ft({grid:l,path:E,stack:S}),p=!0)}}var M=null!==(n=d[x[1]][x[0]])&&void 0!==n?n:s;return y.push(x),{actionGrid:d,bestPath:p,direction:M,fruit:P,grid:w,head:x,length:k,snakePath:y}}function Yt(e){var t=e.data,n=e.params,r=e.complete,a=t.direction,i=t.grid,o=t.longestPath,c=t.stack,l=t.visited,s=Bt({height:n.height,longestPath:o,stack:c,visited:l,width:n.width}),u=Ft({grid:i,path:o,stack:c,direction:a});return 0===c.length&&r(),{actionGrid:u,considered:s.considered,direction:a,grid:i,longestPath:s.longestPath,stack:s.stack,visited:s.visited}}function Zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zt(Object(n),!0).forEach((function(t){Object(me.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _t=function(e){return z.a.createElement(R.a,Object.assign({auto:!1,maxTime:1/0,noCache:!0,controls:[{type:"radio",label:"speed",options:["normal","fast","very fast"],param:"speed",setParams:function(e){return{normal:{delay:100,ticksPerAnimation:1,speed:"normal"},fast:{delay:0,ticksPerAnimation:1,speed:"fast"},"very fast":{delay:0,ticksPerAnimation:20,speed:"very fast"}}[e]}},[{type:"toggle",label:"Display grid",param:"displayGrid"},{type:"toggle",label:"Display circuit",param:"displayCircuit"}]],initData:Qt,initialParams:$t({cellSize:16,delay:100,displayCircuit:!0,displayGrid:!1,fruitGrowth:4,height:20,width:20,initialLength:2,safeMode:!1,speed:"normal",snakePosRandom:!0,directionRandom:!0},e.extraParams),updateData:Xt},e),z.a.createElement(Ht,null))},en=function(e){return z.a.createElement(R.a,Object.assign({auto:!1,maxTime:1/0,initData:Ut,initialParams:{cellSize:16,displayCircuit:!0,displayGrid:!0,fruitGrowth:4,height:20,width:20,initialLength:2,snakePosRandom:!0,directionRandom:!0},updateData:Yt},e),z.a.createElement(Ht,null))},tn={activators:a.a,automata:o.a,boids:l.a,"chaos-game":u.a,dice:f.a,epidemic:p.a,fibonacci:g.a,"game-of-life":b.a,mazes:w.a,percolation:x.a,segregation:P.a,"simple-model":E.a,snake:M.a};t.r={automata:"1D automata",activators:"Activators/Inhibitors",boids:"Boids","chaos-game":"Chaos Game",dice:"Dice Simulator",epidemic:"Epidemic Simulator",fibonacci:"Fibonacci Spiral","game-of-life":"Game of Life",mazes:"Maze generation",percolation:"Percolation",segregation:"Segregation","simple-model":"Simple Model",snake:"Snake Game"}},YhKB:function(e,t,n){e.exports=n.p+"static/chaos-game-20c4833eb95ad08554ab0b5617f6907d.gif"},dVkb:function(e,t,n){e.exports=n.p+"static/maze-ffb52917c0e359f5c80d9a15aadf195f.gif"},fVQo:function(e,t,n){e.exports=n.p+"static/game-of-life-1ffe67497127dd5fad4ddf470e0f2fbb.gif"},"kX+8":function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return m}));var r=n("q1tI"),a=n.n(r),i=n("1uUR"),o=n("sCKr"),c="0000010000000000010000000000\n0000000100010010000000000000\n1110001000000000000000000001\n1010000000000000000000000000\n0000000000100000000010110000\n0100000101010100000000000001\n0000000000010100000001000001\n0000000011100100000000100001\n0000010000000000000000010000\n0000000000010100000000000100".split("\n").map((function(e){return e.split("").map(Number)}));function l(e,t,n){var r=n.length;if(!r)return 0;for(var a=n[0].length,i=0,o=-1;o<=1;o++)for(var c=-1;c<=1;c++){var l=e+o,s=t+c;l<a&&l>0&&s<r&&s>0&&(l!==e||s!==t)&&(i+=n[s][l])}return i}function s(e){var t=e.data,n=e.complete,r=0,a=t.map((function(e,n){return e.map((function(e,a){var i=l(a,n,t);return e&&(i<2||i>3)?(r++,0):e||3!==i?e:(r++,1)}))}));return 0===r&&n(),a}function u(e){var t=e.data;return t.map((function(e,n){return e.map((function(e,r){var a=l(r,n,t);return e&&(a<2||a>3)?0:e||3!==a?e:1}))}))}function h(e,t){var n=e.height,r=e.width,a=e.density;return void 0===t&&(t=Math.random),Array(n).fill(0).map((function(e){return Array(r).fill(0).map((function(){return Number(t()<a)}))}))}var f=function(){return a.a.createElement(o.a,{initData:h,initialParams:{height:10,width:28,density:.15}},a.a.createElement(i.c,null))},d=function(){return a.a.createElement(o.a,{initData:function(){return c},updateData:u,initialParams:{height:10,width:28,density:.15}},a.a.createElement(i.c,null))},p=function(){return a.a.createElement(o.a,{initData:function(){return c},updateData:s,initialParams:{height:10,width:28,density:.15}},a.a.createElement(i.c,null))},m=function(){return a.a.createElement(o.a,{controls:{param:"density",resetOnChange:!0,maxValue:1,step:.01,label:"Grid density"},showTimeSlider:!1,initData:h,updateData:s,initialParams:{height:10,width:28,density:.15}},a.a.createElement(i.c,null))};t.e=function(e){return a.a.createElement(o.a,Object.assign({auto:!1,controls:{param:"density",maxValue:1,step:.01,resetOnChange:!0,label:"Grid density"},showTimeSlider:!1,updateData:s,delay:100,initData:h,initialParams:{height:28,width:28,density:.15}},e),a.a.createElement(i.c,null))}},lsXq:function(e,t,n){e.exports=n.p+"static/activators-be81b3b3a90aa3408fd6b27ad5066309.gif"},mbBF:function(e,t,n){var r=n("ZS3K"),a=Math.hypot,i=Math.abs,o=Math.sqrt;r({target:"Math",stat:!0,arity:2,forced:!!a&&a(1/0,NaN)!==1/0},{hypot:function(e,t){for(var n,r,a=0,c=0,l=arguments.length,s=0;c<l;)s<(n=i(arguments[c++]))?(a=a*(r=s/n)*r+1,s=n):a+=n>0?(r=n/s)*r:n;return s===1/0?1/0:s*o(a)}})},"nA+P":function(e,t,n){e.exports=n.p+"static/snake-8dd775e142dc168a12a3bf2d53835d48.gif"},u0c3:function(e,t,n){"use strict";n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return v}));var r=n("KQm4"),a=n("q1tI"),i=n.n(a),o=n("1uUR"),c=n("VdAu"),l=n("sCKr"),s=.5+Math.sqrt(5)/2,u={0:"right",1:"down",2:"left",3:"up"};function h(){return[0]}function f(e){var t=e.data,n=e.tick;if(0===n)return[0];if(1===n)return[0,1];var a=t[n-1]+t[n-2];return[].concat(Object(r.a)(t),[a])}function d(e){var t=e.ctx,n=e.params.size,r=e.tick;t.fillStyle="#fff",t.fillRect(0,0,n,n);for(var a=0,i=0,o=n,c=0;c<r;c++){var l=u[c%4];o/=s,t.strokeStyle="#ddd",t.strokeRect(a,i,o,o),t.strokeStyle="#222";var h=Math.max(0,o-1);switch(l){case"right":t.beginPath(),t.arc(a+o,i+o,h,Math.PI,-Math.PI/2),t.stroke(),t.closePath(),a+=o;break;case"down":t.beginPath(),t.arc(a,i+o,h,-Math.PI/2,0),t.stroke(),t.closePath(),a+=(1-1/s)*o,i+=o;break;case"left":t.beginPath(),t.arc(a,i,h,0,Math.PI/2),t.stroke(),t.closePath(),a-=o/s,i+=(1-1/s)*o;break;case"up":t.beginPath(),t.arc(a+o,i,h,Math.PI/2,Math.PI),t.stroke(),t.closePath(),i-=o/s}}}var p=function(e){e.tick;var t=e.params.size,n=t,r=t/s;return i.a.createElement(o.a,{height:r,width:n,draw:d})},m=function(e){return i.a.createElement(l.a,Object.assign({initialParams:{size:332},delay:100,maxTime:15},e),i.a.createElement(p,null))},g=function(e){var t=e.data;return i.a.createElement(c.c,{sx:{flexDirection:"row",flexWrap:"wrap"}},t.map((function(e,t){return i.a.createElement(c.a,{sx:{m:1,p:2,bg:"muted",fontSize:1},key:t},e)})))},v=function(e){return i.a.createElement(l.a,Object.assign({initData:h,updateData:f,maxTime:20},e),i.a.createElement(g,null))};t.c=m},ugLk:function(e,t,n){e.exports=n.p+"static/boids-3faa93ffce35ab682f64305d2f1ddf82.gif"}}]);
//# sourceMappingURL=44461f0d8d797552915291517099005aabe2eb53-9e51108a8961e65bae59.js.map