(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{"+CGw":function(e,t,r){"use strict";r.d(t,"d",(function(){return p})),r.d(t,"c",(function(){return m})),r.d(t,"a",(function(){return f}));r("xtjI"),r("4DPX"),r("rzGZ"),r("Dq+y"),r("8npG"),r("Ggvi"),r("E5k/"),r("n0hJ"),r("YBKJ");var a=r("q1tI"),n=r.n(a),i=r("1uUR"),l=r("2A+t"),c=r("VdAu");function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=function(e){return Math.ceil(6*e())};function p(e,t){var r,a=e.data,n=e.tick,i=e.params.nbDice;void 0===t&&(t=Math.random);for(var l=a.totals,c=0,o=[],b=0;b<i;b++)o.push(s(t)),c+=o[b];var p=u(u({},l),{},((r={})[c]=(l[c]||0)+1,r));return{rolls:o,average:(a.average*(n-1)+a.total)/n,total:c,totals:p}}function m(e){return{rolls:[],average:3.5*e.nbDice,total:0,totals:{}}}var f=function(e){var t=e.value,r={background:"#000",width:3,height:3,borderRadius:"100%",position:"absolute"},a={top:3},i={bottom:3},l={right:3},c={left:3},o={top:8};return n.a.createElement("div",{style:{width:21,height:21,marginRight:10,position:"relative",border:"1px solid #000",borderRadius:"3px"}},1!==t&&n.a.createElement("div",{style:u(u(u({},r),a),c)}),t>3&&n.a.createElement("div",{style:u(u(u({},r),a),l)}),6===t&&n.a.createElement("div",{style:u(u(u({},r),o),c)}),t%2==1&&n.a.createElement("div",{style:u(u(u({},r),o),{left:8})}),6===t&&n.a.createElement("div",{style:u(u(u({},r),o),l)}),t>3&&n.a.createElement("div",{style:u(u(u({},r),i),c)}),1!==t&&n.a.createElement("div",{style:u(u(u({},r),i),l)}))},d=function(e){var t,r=e.label,a=e.max,i=e.nbRolls,l=e.nbValues,o=e.theme,u=a?50*i/a:0,b=500/l,s=(null==o||null===(t=o.colors)||void 0===t?void 0:t.primary)||"#33f";return n.a.createElement(c.c,{flexDirection:"column"},n.a.createElement(c.c,{flexDirection:"row",sx:{justifyContent:"center",alignItems:"flex-end",width:b,height:"50px"}},n.a.createElement("div",{style:{width:.8*b,height:u,backgroundColor:s}})),n.a.createElement(c.c,{flexDirection:"row",sx:{justifyContent:"center",fontSize:Math.min(250*l,12)+"px"}},r))},h=function(e){var t,r;function a(){return e.apply(this,arguments)||this}return r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,a.prototype.render=function(){if(null===this.props.data)return null;var e=this.props,t=e.data,r=(e.tick,e.params.nbDice),a=e.theme,i=Number(r),l=6*i-i+1,o=t.rolls,u=t.totals,b=0,s=Array(l).fill(0).map((function(e,t){var r=i+t,a=u[r]||0;return b=Math.max(b,a),{label:r,nbRolls:a}}));return n.a.createElement(c.c,{flexDirection:"column",sx:{justifyContent:"space-between",height:"140px"}},n.a.createElement(c.c,{flexDirection:"row"},o.map((function(e,t){return n.a.createElement(f,{value:e,key:"k-"+t})}))),n.a.createElement(c.c,{flexDirection:"row",sx:{alignItems:"flex-end",height:"80px"}},s.map((function(e){return n.a.createElement(d,Object.assign({},e,{key:e.label,max:b,nbValues:l,theme:a}))}))))},a}(n.a.Component);t.b=function(){var e=Object(l.e)().theme;return n.a.createElement(n.a.Fragment,null,n.a.createElement(i.d,{theme:e,auto:!1,controls:{param:"nbDice",minValue:1,maxValue:6,resetOnChange:!0,label:"Number of dice per roll"},updateData:p,maxTime:1e3,initData:m,initialParams:{nbDice:5}},n.a.createElement(h,{theme:e})))}},"2jic":function(e,t,r){"use strict";r.r(t),r.d(t,"_frontmatter",(function(){return i})),r.d(t,"default",(function(){return c}));r("rzGZ"),r("Dq+y"),r("8npG"),r("Ggvi"),r("E5k/"),r("q1tI");var a=r("7ljp"),n=r("6d3j");var i={Title:"Canvas Frame"},l={_frontmatter:i};function c(e){var t=e.components,r=function(e,t){if(null==e)return{};var r,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,["components"]);return Object(a.b)("wrapper",Object.assign({},l,r,{components:t,mdxType:"MDXLayout"}),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"CanvasFrame")," is a ",Object(a.b)("a",Object.assign({parentName:"p"},{href:"./frame-helpers"}),"frame helper")," that makes it easier to use canvas with react-sim."),Object(a.b)("p",null,"It's used in many of the examples such as ",Object(a.b)("a",Object.assign({parentName:"p"},{href:"./examples/chaos-game"}),"Chaos Game"),", ",Object(a.b)("a",Object.assign({parentName:"p"},{href:"./examples/percolation"}),"Percolation"),") ",Object(a.b)("a",Object.assign({parentName:"p"},{href:"./examples/epidemic"}),"Epidemic simulation"),", etc."),Object(a.b)(n.a,{mdxType:"CanvasFrameExample"}),Object(a.b)("h1",null,"CanvasFrame properties"),Object(a.b)("p",null,"Its properties are:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"all the connected Frame context props (",Object(a.b)("inlineCode",{parentName:"li"},"cachedData"),", ",Object(a.b)("inlineCode",{parentName:"li"},"data"),", ",Object(a.b)("inlineCode",{parentName:"li"},"initData"),", ",Object(a.b)("inlineCode",{parentName:"li"},"params"),", ",Object(a.b)("inlineCode",{parentName:"li"},"results"),", ",Object(a.b)("inlineCode",{parentName:"li"},"tick"),", ",Object(a.b)("inlineCode",{parentName:"li"},"setData")," ),"),Object(a.b)("li",{parentName:"ul"},"draw (function, optional): a function which will be called each time CanvasFrame is updated (ie at each animation cycle)."),Object(a.b)("li",{parentName:"ul"},"height (number, optional): the height of the canvas. If ignored, CanvasFrame will used params.height."),Object(a.b)("li",{parentName:"ul"},"width (number, optional): the width of the canvas. If ignored, CanvasFrame will used params.height.")),Object(a.b)("h1",null,"the draw function"),Object(a.b)("p",null,"The ",Object(a.b)("inlineCode",{parentName:"p"},"draw")," function does all the heavy lifting."),Object(a.b)("p",null,"Its argument is an object with the following properties:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"all the CanvasFrame properties (data, tick, etc. - see above),"),Object(a.b)("li",{parentName:"ul"},"canvas (DOM Node): the actual canvas node."),Object(a.b)("li",{parentName:"ul"},"ctx: (canvas rendering context): the corresponding 2d context. Exactly what you'd get if you typed ",Object(a.b)("inlineCode",{parentName:"li"},"const ctx = canvas.getContext('2d');"),"."),Object(a.b)("li",{parentName:"ul"},"circle (helper function): see below"),Object(a.b)("li",{parentName:"ul"},"roundRectangle (helper function): see below")),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"circle")," and ",Object(a.b)("inlineCode",{parentName:"p"},"roundRectangle")," are helper functions to make it easier to draw circles and rounded rectangles with canvas."),Object(a.b)("p",null,"Both take an object as argument with the following properties:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},Object(a.b)("p",{parentName:"li"},"circle:"),Object(a.b)("ul",{parentName:"li"},Object(a.b)("li",{parentName:"ul"},"x: x coordinate of circle center,"),Object(a.b)("li",{parentName:"ul"},"y: y coordinate of circle center,"),Object(a.b)("li",{parentName:"ul"},"r: radius of circle"))),Object(a.b)("li",{parentName:"ul"},Object(a.b)("p",{parentName:"li"},"roundRectangle:"),Object(a.b)("ul",{parentName:"li"},Object(a.b)("li",{parentName:"ul"},"x: x coordinate of top-left corner of rectangle,"),Object(a.b)("li",{parentName:"ul"},"y: y coordinate of top-left corner of rectangle,"),Object(a.b)("li",{parentName:"ul"},"width: width of rectangle,"),Object(a.b)("li",{parentName:"ul"},"height: height of rectangle,"),Object(a.b)("li",{parentName:"ul"},"tl: radius of top-left corner,"),Object(a.b)("li",{parentName:"ul"},"tr: radius of top-right corner,"),Object(a.b)("li",{parentName:"ul"},"bl: radius of bottom-left corner,"),Object(a.b)("li",{parentName:"ul"},"br: radius of botrom-right corner,"),Object(a.b)("li",{parentName:"ul"},"r: radius of all unspecified corners.")))),Object(a.b)("p",null,"so for example, you can have a ",Object(a.b)("inlineCode",{parentName:"p"},"draw")," function that would go like this:"),Object(a.b)("pre",null,Object(a.b)("code",Object.assign({parentName:"pre"},{className:"language-jsx"}),"const draw = ({ctx, data, circle, params}) => {\n  const {height, width} = params;\n  ctx.clearReact(0, 0, width, height);\n  data.forEach(d => circle({x: d.x, y: d.y, 2}));\n  ctx.fill();\n}\n")))}c.isMDXComponent=!0},"6d3j":function(e,t,r){"use strict";r.d(t,"a",(function(){return h})),r.d(t,"b",(function(){return y}));r("pJf4"),r("q8oJ"),r("YbXK"),r("cFtU"),r("m210"),r("xtjI"),r("4DPX"),r("Ggvi"),r("rzGZ"),r("Dq+y"),r("8npG"),r("YBKJ"),r("n0hJ");var a=r("q1tI"),n=r.n(a),i=r("1uUR"),l=r("VdAu"),c=r("+CGw");function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s,p=function(e){return n.a.createElement(l.c,{sx:{border:"1px solid currentcolor",p:2,width:"fit-content"}},n.a.createElement(i.d,e))},m=function(e){var t=e.height,r=e.width,a=e.balls,n=e.speed;return Array(a).fill(0).map((function(e){return{x:Math.random()*r,y:Math.random()*t,c:"hsl("+Math.floor(360*Math.random())+",85%,57%)",vx:(Math.random()-.5)*n,vy:(Math.random()-.5)*n}}))},f=function(e){var t=e.data,r=e.params;return t.map((function(e){var t=e.x,a=e.y,n=function(e,t){if(null==e)return{};var r,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,["x","y"]);return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({x:(t+n.vx)%r.width,y:(a+n.vy)%r.height},n)}))},d=function(e){var t=e.ctx,r=e.cachedData,a=e.data,n=e.circle,i=e.params,l=e.tick,c=i.height,o=i.width;t.clearRect(0,0,o,c);for(var u=function(e){var a=l-e;t.globalAlpha=.1+.05*(10-a);var i=.3*(10-a);r[e].forEach((function(e){t.fillStyle=e.c,n({x:e.x,y:e.y,r:i}),t.fill()}))},b=Math.max(l-10,0);b<l;b++)u(b);t.globalAlpha=1,a.forEach((function(e){t.fillStyle=e.c,n({x:e.x,y:e.y,r:3}),t.fill()}))},h=function(){return n.a.createElement(p,{initData:m,updateData:f,maxTime:500,initialParams:{height:200,width:500,balls:200,speed:3}},n.a.createElement(i.a,{draw:d}))},O=Object(i.i)((function(e){var t=e.data;return n.a.createElement(l.c,{flexDirection:"row",sx:{height:"30px"}},t.rolls.map((function(e,t){return n.a.createElement(c.a,{value:e,key:"k-"+t})})))})),j=[{color:"#33e",label:"Average",accessor:function(e){return Number(e.average.toFixed(2))}},{color:"#e3e",label:"Last roll",accessor:function(e){return e.total}}],g=(s=Array(13).keys(),function(e){if(Array.isArray(e))return o(e)}(s)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(s)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(s)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).slice(2).map((function(e){return{color:"hsl("+360*(1+e-2)/11+",85%,57%)",label:String(e),accessor:function(t){return t.totals[e]||0}}})),y=function(){return n.a.createElement(p,{initData:c.c,updateData:c.d,initialParams:{nbDice:2}},n.a.createElement(l.c,{flexDirection:"column"},n.a.createElement(l.e,{sx:{fontSize:1,fontWeight:"bold"}},"Roll:"),n.a.createElement(O,null),n.a.createElement(l.e,{sx:{fontSize:1,fontWeight:"bold"}},"Average rolls:"),n.a.createElement(i.f,{series:j}),n.a.createElement(i.b,{series:j}),n.a.createElement(l.e,{sx:{fontSize:1,fontWeight:"bold"}},"Roll distribution:"),n.a.createElement(i.f,{series:g,stacked:!0}),n.a.createElement(i.b,{series:g.slice(0,6)}),n.a.createElement(i.b,{series:g.slice(6)})))}}}]);
//# sourceMappingURL=component---src-pages-frame-helpers-canvas-frame-mdx-0197688f825425867d51.js.map