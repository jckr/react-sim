{"version":3,"sources":["webpack:///./src/components/examples/chaos-game.js","webpack:///./src/pages/examples/chaos-game.mdx","webpack:///./node_modules/gatsby/node_modules/core-js/modules/es6.string.repeat.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/_string-repeat.js"],"names":["updateAttractors","angleOffset","nbAttractors","height","width","center","radius","Math","min","Array","keys","map","i","angle","x","cos","PI","y","sin","init","random","undefined","attractors","o","background","floor","color","points","prevDirection","updateData","data","params","tick","length","rules","split","reduce","prev","curr","push","direction","lastPoint","attractor","newPoint","Frame","props","draw","ctx","circle","globalAlpha","fillStyle","globalCompositeOperation","fillRect","point","r","fill","BasicChaosGame","ticksPerAnimation","maxTime","initData","isPlaying","loop","initialParams","Controls","withControls","setParams","nbToggles","nbRows","ceil","toggle","a","key","sx","flex","checked","charAt","label","setValue","bit","updatedRules","slice","toggles","flexDirection","justifyContent","minValue","maxValue","value","v","repeat","ChaosGame","_frontmatter","layoutProps","MDXContent","components","mdxType","parentName","isMDXComponent","$export","P","toInteger","defined","module","exports","count","str","String","this","res","n","Infinity","RangeError"],"mappings":"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","file":"component---src-pages-examples-chaos-game-mdx-5d203844a4835d17db06.js","sourcesContent":["import React from 'react';\nimport {\n  withControls,\n  Range,\n  Toggle,\n  CanvasFrame,\n} from 'react-sim';\nimport { Flex } from 'rebass';\n\nimport Model from './framed-model';\n\nexport const updateAttractors = ({ angleOffset, nbAttractors, height, width }) => {\n  const center = { x: width / 2, y: height / 2 };\n  const radius = (0.95 * Math.min(height, width)) / 2;\n  return [...Array(nbAttractors).keys()].map(i => {\n    const angle = angleOffset + (0.5 * (nbAttractors + 4 * i)) / nbAttractors;\n    return {\n      x: center.x + radius * Math.cos(angle * Math.PI),\n      y: center.y - radius * Math.sin(angle * Math.PI),\n    };\n  });\n};\n\nexport function init({ angle, nbAttractors, height, width }, random = Math.random) {\n  const angleOffset = angle === undefined ? random() * 2 * Math.PI : angle;\n  const attractors = updateAttractors({\n    angleOffset,\n    nbAttractors,\n    height,\n    width,\n  });\n  const o = {\n    x: random() * width,\n    y: random() * height,\n  };\n  const background = `hsla(${Math.floor(random() * 360)}, 30%, 7%, 1)`;\n  const color = `hsla(${Math.floor(random() * 360)}, 77%, 45%, 1)`;\n  return {\n    attractors,\n    background,\n    color,\n    points: [o],\n    prevDirection: 0,\n  };\n}\n\nexport function updateData({ data, params, tick }, random = Math.random) {\n  const { nbAttractors } = params;\n  if (data.attractors.length !== nbAttractors) {\n    data.attractors = updateAttractors(params);\n  }\n  const rules = params.rules\n    ? params.rules.split('').reduce((prev, curr, i) => {\n        if (curr === '1') {\n          prev.push(i);\n        }\n        return prev;\n      }, [])\n    : [...Array(nbAttractors).keys()];\n  const direction =\n    (data.prevDirection + rules[Math.floor(random() * rules.length)]) %\n    nbAttractors;\n  data.prevDirection = direction;\n  const lastPoint = data.points[data.points.length - 1];\n  const attractor = data.attractors[direction];\n  const newPoint = {\n    x: (lastPoint.x + attractor.x) / 2,\n    y: (lastPoint.y + attractor.y) / 2,\n  };\n  data.points.push(newPoint);\n  return data;\n}\n\nexport const Frame = props => <CanvasFrame draw={draw} {...props} />;\n\nfunction draw({ ctx, data, params, tick, circle }) {\n  const { height, width } = params;\n  ctx.globalAlpha = 1;\n  ctx.fillStyle = data.background;\n  ctx.globalCompositeOperation = 'source-over';\n  ctx.fillRect(0, 0, width, height);\n\n  ctx.globalCompositeOperation = 'lighter';\n  ctx.fillStyle = data.color;\n  ctx.globalAlpha = 0.8;\n\n  for (let i = 0; i < tick; i++) {\n    const point = data.points[i];\n    const { x, y } = point;\n    const { r } = params;\n    circle({ x, y, r });\n    ctx.fill();\n  }\n}\n\nexport const BasicChaosGame = () => (\n  <Model\n    ticksPerAnimation={100}\n    maxTime={10000}\n    initData={init}\n    isPlaying\n    loop\n    updateData={updateData}\n    initialParams={{\n      height: 332,\n      width: 332,\n      nbAttractors: 3,\n      r: 1,\n    }}\n  >\n    <Frame />\n  </Model>\n);\n\nexport const CustomControls = ({ params, setParams }) => {\n  const nbToggles = params.nbAttractors;\n  const nbRows = Math.ceil(nbToggles / 5);\n  const toggle = a =>\n    a < nbToggles ? (\n      <Toggle\n        key={`toggle-${a}`}\n        sx={{ flex: '1 1 0' }}\n        checked={params.rules.charAt(a) === '1'}\n        label={`${a + 1}${a === 0 ? 'st' : a === 1 ? 'nd' : 'th'} vertex`}\n        setValue={checked => {\n          const bit = params.rules.charAt(a) === '1' ? '0' : '1';\n          const updatedRules =\n            params.rules.slice(0, a) + bit + params.rules.slice(a + 1);\n          setParams({ rules: updatedRules });\n        }}\n      />\n    ) : null;\n\n  const toggles = [...Array(nbRows).keys()].map(r => (\n    <Flex\n      flexDirection=\"row\"\n      key={`tr-${r}`}\n      sx={{ justifyContent: 'space-between' }}\n    >\n      {[r * 5, r * 5 + 1, r * 5 + 2, r * 5 + 3, r * 5 + 4].map(toggle)}\n    </Flex>\n  ));\n\n  return (\n    <Flex flexDirection=\"column\">\n      <Range\n        key=\"range\"\n        minValue={3}\n        maxValue={20}\n        label=\"Vertices\"\n        value={params.nbAttractors}\n        setValue={v =>\n          setParams({ nbAttractors: v, rules: '1'.repeat(v) }, true)\n        }\n      />\n      <Flex flexDirection=\"column\">{toggles}</Flex>\n    </Flex>\n  );\n};\n\nconst Controls = withControls(CustomControls);\nexport const ChaosGame = () => (\n  <Model\n    ticksPerAnimation={100}\n    maxTime={20000}\n    initData={init}\n    updateData={updateData}\n    initialParams={{\n      height: 332,\n      width: 332,\n      nbAttractors: 7,\n      angle: 0,\n      r: 1,\n      rules: '1001100',\n    }}\n  >\n    <Flex flexDirection=\"column\">\n      <Frame />\n      <Controls />\n    </Flex>\n  </Model>\n);\n","import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport { BasicChaosGame, ChaosGame } from '../../components/examples/chaos-game';\nexport const _frontmatter = {\n  \"Title\": \"Chaos Game\"\n};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = \"wrapper\";\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n    <h1 {...{\n      \"id\": \"chaos-game\"\n    }}>{`Chaos Game`}</h1>\n    <BasicChaosGame mdxType=\"BasicChaosGame\" />\n    <p>{`The `}<a parentName=\"p\" {...{\n        \"href\": \"https://en.wikipedia.org/wiki/Chaos_game\"\n      }}>{`Chaos Game`}</a>{` is a method to generate a fractal.`}</p>\n    <p>{`We start from an equilateral triangle, and one point chosen at random in the plane.\nAt each iteration, we plot a new point which is halfway between the previous point, and one of the vertices of the triangle, chosen at random.\nWe continue plot points like these.`}</p>\n    <p>{`Eventually, our figure looks like the `}<a parentName=\"p\" {...{\n        \"href\": \"https://en.wikipedia.org/wiki/Sierpi%C5%84ski_triangle\"\n      }}>{`Sierpiński triangle`}</a></p>\n    <ChaosGame mdxType=\"ChaosGame\" />\n    <p>{`But we can generalize this to other polygons.\nIn this second version, we can choose a regular polygon with 3 to 12 vertices (so, anything from a triangle to a dodecagon).\nWe can also choose whether we use each vertex as an attractor or not. If a vertex is not an attractor, it won't be used to compute the position of new points in iterations.`}</p>\n    <p>{`For larger polygons, if all vertices are used as attractors, the resulting figure looks a bit messy. But if we only pick a few, then shapes will start to emerge.`}</p>\n    <p>{`One interesting pattern is for polygons with odd number of vertices, if vertices = 2 x n + 3.\nYou can try:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`set the first vertex,`}</li>\n      <li parentName=\"ul\">{`leave n vertices unset,`}</li>\n      <li parentName=\"ul\">{`set the next 2 vertices,`}</li>\n      <li parentName=\"ul\">{`leave the last n vertices unset.`}</li>\n    </ul>\n    <p>{`So: 1 0 1 1 0 for 5, 1 0 0 1 1 0 0 for 7, 1 0 0 0 1 1 0 0 0 for 9, etc.`}</p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      ","var $export = require('./_export');\n\n$export($export.P, 'String', {\n  // 21.1.3.13 String.prototype.repeat(count)\n  repeat: require('./_string-repeat')\n});\n","'use strict';\nvar toInteger = require('./_to-integer');\nvar defined = require('./_defined');\n\nmodule.exports = function repeat(count) {\n  var str = String(defined(this));\n  var res = '';\n  var n = toInteger(count);\n  if (n < 0 || n == Infinity) throw RangeError(\"Count can't be negative\");\n  for (;n > 0; (n >>>= 1) && (str += str)) if (n & 1) res += str;\n  return res;\n};\n"],"sourceRoot":""}