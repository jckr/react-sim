(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{CczQ:function(e,t,r){var a=r("P8UN"),n=Math.abs;a(a.S,"Math",{hypot:function(e,t){for(var r,a,i=0,o=0,c=arguments.length,s=0;o<c;)s<(r=n(arguments[o++]))?(i=i*(a=s/r)*a+1,s=r):i+=r>0?(a=r/s)*a:r;return s===1/0?1/0:s*Math.sqrt(i)}})},Hmny:function(e,t,r){"use strict";r.r(t),r.d(t,"_frontmatter",(function(){return k})),r.d(t,"default",(function(){return w}));r("rzGZ"),r("Dq+y"),r("8npG"),r("Ggvi"),r("E5k/");var a=r("q1tI"),n=r.n(a),i=r("7ljp"),o=(r("pJf4"),r("q8oJ"),r("cFtU"),r("m210"),r("4DPX"),r("n0hJ"),r("YbXK"),r("ToIb"),r("CczQ"),r("VdAu")),c=r("1uUR"),s=r("sCKr");function u(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var d={sick:"#4f8c9d",recovered:"#add51f",healthy:"#997cfb",dead:"#6a9012"};function l(e,t){var r=e.data,a=e.tick,n=e.params,i=e.complete;void 0===t&&(t=Math.random);var o=JSON.parse(JSON.stringify(r.agents)),c=0,s=0,u=0,h=0,d=n.contaminationRisk,l=n.deathRisk,v=n.r,f=n.recoveryTicks,p=n.height,y=n.width;return o.forEach((function(e,r){if("sick"===e.status&&(a>=e.recovery?e.status="recovered":t()<l&&(e.status="dead")),"dead"!==e.status){for(var n=r+1;n<o.length;n++){var i=o[n],m=i.x-e.x,b=i.y-e.y,g=Math.hypot(m,b);if(g<2*v){var k=m/g,x=b/g;e.vx=e.vx-k,e.vy=e.vy-x,i.vx=k,i.vy=x,"sick"===e.status&&"healthy"===i.status&&t()<=d&&(i.status="sick",i.recovery=a+f),"healthy"===e.status&&"sick"===i.status&&t()<=d&&(e.status="sick",e.recovery=a+f)}}e.x=e.x+e.vx,e.y=e.y+e.vy,(e.vy<0&&e.y<v||e.vy>0&&e.y>p-v)&&(e.vy=-e.vy),(e.vx<0&&e.x<v||e.vx>0&&e.x>y-v)&&(e.vx=-e.vx)}switch(e.status){case"sick":c++;break;case"healthy":s++;break;case"recovered":h++;break;case"dead":u++}})),0===c&&i(),{agents:o,sick:c,recovered:h,dead:u,healthy:s}}function v(e,t,r){for(var a=u(Array(e).keys()).reduce((function(e,t){return e[t]=!0,e}),{}),n=new Set,i=0;i<t;i++){var o=Math.floor(r()*Object.keys(a).length);n.add(o),delete a[o]}return n}function f(e,t,r,a){var n=a.x,i=a.y;return e.slice(t).filter((function(e){var t=e.x,a=e.y;return Math.hypot(t-n,a-i)<r}))}function p(e,t){var r=e.nbAgents,a=void 0===r?200:r,n=e.nbSick,i=void 0===n?5:n,o=e.maxSpeed,c=void 0===o?30:o,s=(e.contaminationRisk,e.deathRisk,e.recoveryTicks),u=void 0===s?20:s,h=e.nbDistancing,d=void 0===h?50:h,l=e.r,p=void 0===l?3:l,y=e.height,m=void 0===y?300:y,b=e.width,g=void 0===b?400:b;void 0===t&&(t=Math.random);for(var k=v(a,i,t),x=v(a,d,t),w=[],j=0;j<a;j++){var O=void 0,S=void 0;do{S=p/2+t()*(m-p),O=p/2+t()*(g-p)}while(f(w,0,p,{x:O,y:S}).length);var E=k.has(j)?"sick":"healthy",R=k.has(j)?u:null,A=x.has(j),D=A?0:c,M=D*(2*t()-1),T=D*(2*t()-1);w.push({x:O,y:S,status:E,isBouncing:!1,isDistancing:A,vx:M,vy:T,recovery:R,speed:D})}return{agents:w,sick:i,healthy:a-i,dead:0,recovered:0}}var y=function(e){var t,r;function a(t){var r;return(r=e.call(this,t)||this).myRef=n.a.createRef(),r}r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i=a.prototype;return i.componentDidUpdate=function(){var e=this.props,t=e.data,r=e.params,a=r.width,n=r.height,i=r.r,o=this.myRef.current.getContext("2d");o.fillStyle="#fff",o.lineWidth="5px",o.clearRect(0,0,a,n),t.agents.forEach((function(e){var t=e.status,r=(e.isBouncing,e.x),a=e.y;o.beginPath(),o.fillStyle=d[t],o.arc(r,a,i,0,2*Math.PI,!1),o.closePath(),o.fill()}))},i.render=function(){return n.a.createElement("div",null,n.a.createElement("canvas",{width:this.props.params.width,height:this.props.params.height,ref:this.myRef}))},a}(n.a.Component),m=Object(c.i)(y),b=[{color:d.healthy,label:"Healthy",accessor:function(e){return e.healthy}},{color:d.sick,label:"Sick",accessor:function(e){return e.sick}},{color:d.recovered,label:"Recovered",accessor:function(e){return e.recovered}},{color:d.dead,label:"Dead",accessor:function(e){return e.dead}}],g=function(){return n.a.createElement(s.a,{auto:"false",initData:p,initialParams:{nbAgents:500,nbSick:20,contaminationRisk:1,deathRisk:.001,maxSpeed:2,recoveryTicks:200,nbDistancing:0,r:2,height:332,width:332},updateData:l,maxTime:500},n.a.createElement(o.c,{flexDirection:"column"},n.a.createElement(m,null),n.a.createElement(c.f,{series:b,stacked:!0}),n.a.createElement(c.b,{series:b})))};var k={Title:"Epidemic"},x={_frontmatter:k};function w(e){var t=e.components,r=function(e,t){if(null==e)return{};var r,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,["components"]);return Object(i.b)("wrapper",Object.assign({},x,r,{components:t,mdxType:"MDXLayout"}),Object(i.b)("h1",{id:"epidemic"},"Epidemic"),Object(i.b)(g,{mdxType:"Epidemic"}),Object(i.b)("h3",{id:"caveat"},"Caveat"),Object(i.b)("p",null,"The purpose of this model is just to show how simulations work in React. It has no scientific value."),Object(i.b)("p",null,"This epidemic simulator is inspired by the work of ",Object(i.b)("a",Object.assign({parentName:"p"},{href:"https://www.washingtonpost.com/graphics/2020/world/corona-simulator/"}),"Harry Stevens at the Washington Post"),".\nAgain, this react-sim version was made without any scientific supervision and the parameters are just put in so it can look interesting."),Object(i.b)("p",null,'We have a number of agents moving in a small space. When they collide, "sick" agents may contaminate "healthy" agents, and "sick" agents may die.'))}w.isMDXComponent=!0},sCKr:function(e,t,r){"use strict";var a=r("q1tI"),n=r.n(a),i=r("1uUR"),o=r("VdAu");t.a=function(e){return n.a.createElement(o.c,{sx:{border:"1px solid currentcolor",my:2,p:2,width:"350px"}},n.a.createElement(i.d,e))}}}]);
//# sourceMappingURL=component---src-pages-examples-epidemic-mdx-182b9e40565b71eca178.js.map