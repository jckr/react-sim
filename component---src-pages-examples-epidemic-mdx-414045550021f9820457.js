(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{CczQ:function(t,e,r){var n=r("P8UN"),a=Math.abs;n(n.S,"Math",{hypot:function(t,e){for(var r,n,i=0,o=0,c=arguments.length,s=0;o<c;)s<(r=a(arguments[o++]))?(i=i*(n=s/r)*n+1,s=r):i+=r>0?(n=r/s)*n:r;return s===1/0?1/0:s*Math.sqrt(i)}})},Hmny:function(t,e,r){"use strict";r.r(e),r.d(e,"_frontmatter",(function(){return y})),r.d(e,"default",(function(){return b}));r("rzGZ"),r("Dq+y"),r("8npG"),r("Ggvi"),r("E5k/");var n=r("q1tI"),a=r.n(n),i=r("7ljp"),o=(r("pJf4"),r("q8oJ"),r("cFtU"),r("m210"),r("4DPX"),r("n0hJ"),r("YbXK"),r("ToIb"),r("CczQ"),r("1uUR"));function c(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var u={sick:"red",recovered:"gold",healthy:"blue",dead:"black"};function h(t){var e=t.data,r=t.tick,n=t.params,a=t.complete,i=JSON.parse(JSON.stringify(e)),o=0,c=n.contaminationRisk,s=n.deathRisk,u=n.r,h=n.recoveryTicks,d=n.height,l=n.width;return i.forEach((function(t,e){if("sick"===t.status&&(r>=t.recovery?t.status="recovered":Math.random()<s&&(t.status="dead")),"dead"!==t.status){for(var n=e+1;n<i.length;n++){var a=i[n],p=a.x-t.x,f=a.y-t.y,v=Math.hypot(p,f);if(v<2*u){var y=p/v,m=f/v;t.vx=t.vx-y,t.vy=t.vy-m,a.vx=y,a.vy=m,"sick"===t.status&&"healthy"===a.status&&Math.random()<=c&&(a.status="sick",a.recovery=r+h),"healthy"===t.status&&"sick"===a.status&&Math.random()<=c&&(t.status="sick",t.recovery=r+h)}}t.x=t.x+t.vx,t.y=t.y+t.vy,(t.vy<0&&t.y<u||t.vy>0&&t.y>d-u)&&(t.vy=-t.vy),(t.vx<0&&t.x<u||t.vx>0&&t.x>l-u)&&(t.vx=-t.vx),"sick"===t.status&&o++}})),0===o&&a(),i}function d(t,e){for(var r=c(Array(t).keys()).reduce((function(t,e){return t[e]=!0,t}),{}),n=new Set,a=0;a<e;a++){var i=Math.floor(Math.random()*Object.keys(r).length);n.add(i),delete r[i]}return n}function l(t,e,r,n){var a=n.x,i=n.y;return t.slice(e).filter((function(t){var e=t.x,n=t.y;return Math.hypot(e-a,n-i)<r}))}function p(t){for(var e=t.nbAgents,r=void 0===e?200:e,n=t.nbSick,a=void 0===n?5:n,i=t.maxSpeed,o=void 0===i?30:i,c=(t.contaminationRisk,t.deathRisk,t.recoveryTicks),s=void 0===c?20:c,u=t.nbDistancing,h=void 0===u?50:u,p=t.r,f=void 0===p?3:p,v=t.height,y=void 0===v?300:v,m=t.width,b=void 0===m?400:m,g=d(r,a),x=d(r,h),k=[],w=0;w<r;w++){var M=void 0,j=void 0;do{j=f/2+Math.random()*(y-f),M=f/2+Math.random()*(b-f)}while(l(k,0,f,{x:M,y:j}).length);var O=g.has(w)?"sick":"healthy",S=g.has(w)?s:null,R=x.has(w),E=R?0:o,D=E*(2*Math.random()-1),A=E*(2*Math.random()-1);k.push({x:M,y:j,status:O,isBouncing:!1,isDistancing:R,vx:D,vy:A,recovery:S,speed:E})}return k}var f=function(t){var e,r;function n(e){var r;return(r=t.call(this,e)||this).myRef=a.a.createRef(),r}r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var i=n.prototype;return i.componentDidUpdate=function(){var t=this.props,e=t.data,r=t.params,n=r.width,a=r.height,i=r.r,o=this.myRef.current.getContext("2d");o.fillStyle="#fff",o.lineWidth="5px",o.clearRect(0,0,n,a),e.forEach((function(t){var e=t.status,r=(t.isBouncing,t.x),n=t.y;o.beginPath(),o.fillStyle=u[e],o.arc(r,n,i,0,2*Math.PI,!1),o.closePath(),o.fill()}))},i.render=function(){return a.a.createElement("div",null,a.a.createElement("canvas",{width:this.props.params.width,height:this.props.params.height,ref:this.myRef}),a.a.createElement("div",{style:{cursor:"pointer",background:"#eee",padding:"8px",margin:"8px 8px 8px 0",width:"fit-content"},onClick:this.props.initData},"Reset sim"))},n}(a.a.Component),v=function(){return a.a.createElement(o.c,{auto:"false",initData:p,initialParams:{nbAgents:500,nbSick:20,contaminationRisk:1,deathRisk:.001,maxSpeed:2,recoveryTicks:200,nbDistancing:0,r:3,height:300,width:400},updateData:h,maxTime:1/0},a.a.createElement(f,null))};var y={Title:"Epidemic"},m={_frontmatter:y};function b(t){var e=t.components,r=function(t,e){if(null==t)return{};var r,n,a={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(a[r]=t[r]);return a}(t,["components"]);return Object(i.b)("wrapper",Object.assign({},m,r,{components:e,mdxType:"MDXLayout"}),Object(i.b)("h1",null,"Epidemic"),Object(i.b)(v,{mdxType:"Epidemic"}),Object(i.b)("h3",null,"Caveat"),Object(i.b)("p",null,"The purpose of this model is just to show how simulations work in React. It has no scientific value."))}b.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-examples-epidemic-mdx-414045550021f9820457.js.map