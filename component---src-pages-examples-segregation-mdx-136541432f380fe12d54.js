(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{sCKr:function(e,r,t){"use strict";t.d(r,"b",(function(){return c})),t.d(r,"a",(function(){return l}));var n=t("q1tI"),o=t.n(n),a=t("1uUR"),i=t("VdAu"),c=function(e){return o.a.createElement(i.c,{sx:{border:"1px solid currentcolor",p:2}},o.a.createElement(a.d,e))},l=function(e){return o.a.createElement(i.c,{sx:{border:"1px solid currentcolor",p:2,width:"fit-content"}},o.a.createElement(a.d,e))}},smyd:function(e,r,t){"use strict";t.r(r),t.d(r,"_frontmatter",(function(){return w})),t.d(r,"default",(function(){return j}));t("rzGZ"),t("Dq+y"),t("8npG"),t("Ggvi"),t("E5k/");var n=t("q1tI"),o=t.n(n),a=t("7ljp"),i=(t("xtjI"),t("4DPX"),t("YBKJ"),t("n0hJ"),t("1uUR")),c=t("VdAu"),l=t("sCKr");function u(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function s(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?u(Object(t),!0).forEach((function(r){p(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function p(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var f=function(e,r){void 0===r&&(r=Math.random);var t=e.cols,n=e.rows,o=e.proportion,a=e.tolerance,i=Array(n).fill(0).map((function(e){return Array(t).fill(0).map((function(e){return{community:100*r()>o?1:0}}))}));i.forEach((function(e,r){return e.forEach((function(e,t){e.isHappy=h(i,t,r,a)}))}));var c=function(e,r){return e.reduce((function(t,n,o){return n.reduce((function(t,n,a){return t+h(e,a,o,r)}),t)}),0)}(i,a);return{grid:i,happy:c,happiness:c/(t*n),totalMoves:0}};function h(e,r,t,n){var o=function(e,r,t){var n=e.length,o=e[0].length,a=0===t||t===n-1;return 0===r||r===o-1?a?3:5:a?5:8}(e,r,t);return(o-function(e,r,t){var n=e[t][r].community;return[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]].reduce((function(o,a){var i=r+a[0],c=t+a[1];(function(e,r,t){if(!e)return!1;var n=e.length;if(t<0||t>=n)return!1;var o=e[0].length;if(r<0||r>=o)return!1;return!0})(e,i,c)&&(e[c][i].community===n&&(o+=1));return o}),0)}(e,r,t))/o<n/100}var m=function(e,r){var t=e.data,n=e.params,o=e.complete;void 0===r&&(r=Math.random);var a=n.cols,i=n.rows,c=n.threshold,l=n.tolerance,u=[],p=0,f=t.totalMoves,m=JSON.parse(JSON.stringify(t.grid));for(m.forEach((function(e,r){return e.forEach((function(e,t){e.prevX=t,e.prevY=r,h(m,t,r,l)?(p+=1,e.isHappy=1):(e.isHappy=0,u.push([t,r]))}))})),p>a*i*c/100&&o();u.length>1;){var d=u.shift(),v=Math.floor(r()*u.length),b=u[v],y=s({},m[d[1]][d[0]]);m[d[1]][d[0]]=s({},m[b[1]][b[0]]),m[b[1]][b[0]]=y,f+=2,u=u.slice(0,v).concat(u.slice(v+1))}return{grid:m,totalMoves:f,happy:p,happiness:p/(a*i)}},d=function(e){var r=e.ctx,t=e.data,n=e.params,o=e.circle,a=n.height,i=n.width,c=n.rows,l=n.cols,u=n.showmoves,s=a/c,p=i/l,f=.8*Math.min(s,p);r.clearRect(0,0,i,a),r.strokeStyle="#000",r.lineWidth=2,r.globalAlpha=1,t.grid.forEach((function(e,t){return e.forEach((function(e,n){if(0===e.community)r.fillStyle="#33e",o({x:(n+.5)*s,y:(t+.5)*p,r:f/2}),e.isHappy?r.fill():r.stroke();else{r.fillStyle="#a0c";var a=(n+.5)*s-f/2,i=(t+.5)*p-f/2;e.isHappy?r.fillRect(a,i,f,f):r.strokeRect(a,i,f,f)}}))})),u&&(r.strokeStyle="#222",r.fillStyle="#222",r.globalAlpha=.5,r.lineWidth=1,t.grid.forEach((function(e,t){e.forEach((function(e,n){if(void 0!==e.prevX){var a=e.prevX,i=e.prevY;if(a!==n||i!==t){var c=s*(a+.5),l=s*(n+.5),u=p*(i+.5),h=p*(t+.5);r.moveTo(c,u),r.lineTo(l,h),r.stroke(),o({x:c,y:u,r:f/4}),r.fill(),o({x:l,y:h,r:f/4}),r.fill()}}}))})))},v=function(e){return o.a.createElement(i.a,Object.assign({draw:d},e))},b={label:"Happiness",accessor:function(e){return e.happy}},y=[{label:"Happiness",accessor:function(e){return Math.floor(1e3*Number(e.happiness.toFixed(3)))/10+"%"}},{label:"Total moves",accessor:function(e){return e.totalMoves}}],g={cols:30,rows:30,height:480,width:480,tolerance:60,proportion:50,showmoves:!0,threshold:99},O=function(){return o.a.createElement(l.a,{initialParams:g,initData:f,updateData:m,maxTime:50,delay:100,controls:[{param:"tolerance",label:"Tolerance"},{param:"proportion",label:"Proportion"},{param:"threshold",label:"Proportion"},{param:"showmoves",label:"Show moves",type:"toggle"}]},o.a.createElement(c.c,{flexDirection:"column"},o.a.createElement(v,null),o.a.createElement(i.f,{series:b}),o.a.createElement(i.b,{series:y})))};var w={Title:"Segregation"},E={_frontmatter:w};function j(e){var r=e.components,t=function(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,["components"]);return Object(a.b)("wrapper",Object.assign({},E,t,{components:r,mdxType:"MDXLayout"}),Object(a.b)("h1",{id:"segregation"},"Segregation"),Object(a.b)(O,{mdxType:"Segregation"}))}j.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-examples-segregation-mdx-136541432f380fe12d54.js.map