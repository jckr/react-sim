(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{CczQ:function(t,e,r){var a=r("P8UN"),n=Math.abs;a(a.S,"Math",{hypot:function(t,e){for(var r,a,o=0,i=0,c=arguments.length,s=0;i<c;)s<(r=n(arguments[i++]))?(o=o*(a=s/r)*a+1,s=r):o+=r>0?(a=r/s)*a:r;return s===1/0?1/0:s*Math.sqrt(o)}})},Hmny:function(t,e,r){"use strict";r.r(e),r.d(e,"_frontmatter",(function(){return k})),r.d(e,"default",(function(){return x}));r("rzGZ"),r("Dq+y"),r("8npG"),r("Ggvi"),r("E5k/");var a=r("q1tI"),n=r.n(a),o=r("7ljp"),i=(r("pJf4"),r("q8oJ"),r("cFtU"),r("m210"),r("4DPX"),r("n0hJ"),r("YbXK"),r("ToIb"),r("CczQ"),r("VdAu")),c=r("1uUR");function s(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}var h={sick:"#4f8c9d",recovered:"#add51f",healthy:"#997cfb",dead:"#6a9012"};function d(t){var e=t.data,r=t.tick,a=t.params,n=t.complete,o=JSON.parse(JSON.stringify(e.agents)),i=0,c=0,s=0,u=0,h=a.contaminationRisk,d=a.deathRisk,l=a.r,f=a.recoveryTicks,v=a.height,y=a.width;return o.forEach((function(t,e){if("sick"===t.status&&(r>=t.recovery?t.status="recovered":Math.random()<d&&(t.status="dead")),"dead"!==t.status){for(var a=e+1;a<o.length;a++){var n=o[a],p=n.x-t.x,m=n.y-t.y,b=Math.hypot(p,m);if(b<2*l){var k=p/b,g=m/b;t.vx=t.vx-k,t.vy=t.vy-g,n.vx=k,n.vy=g,"sick"===t.status&&"healthy"===n.status&&Math.random()<=h&&(n.status="sick",n.recovery=r+f),"healthy"===t.status&&"sick"===n.status&&Math.random()<=h&&(t.status="sick",t.recovery=r+f)}}t.x=t.x+t.vx,t.y=t.y+t.vy,(t.vy<0&&t.y<l||t.vy>0&&t.y>v-l)&&(t.vy=-t.vy),(t.vx<0&&t.x<l||t.vx>0&&t.x>y-l)&&(t.vx=-t.vx)}switch(t.status){case"sick":i++;break;case"healthy":c++;break;case"recovered":u++;break;case"dead":s++}})),0===i&&n(),{agents:o,sick:i,recovered:u,dead:s,healthy:c}}function l(t,e){for(var r=s(Array(t).keys()).reduce((function(t,e){return t[e]=!0,t}),{}),a=new Set,n=0;n<e;n++){var o=Math.floor(Math.random()*Object.keys(r).length);a.add(o),delete r[o]}return a}function f(t,e,r,a){var n=a.x,o=a.y;return t.slice(e).filter((function(t){var e=t.x,a=t.y;return Math.hypot(e-n,a-o)<r}))}function v(t){for(var e=t.nbAgents,r=void 0===e?200:e,a=t.nbSick,n=void 0===a?5:a,o=t.maxSpeed,i=void 0===o?30:o,c=(t.contaminationRisk,t.deathRisk,t.recoveryTicks),s=void 0===c?20:c,u=t.nbDistancing,h=void 0===u?50:u,d=t.r,v=void 0===d?3:d,y=t.height,p=void 0===y?300:y,m=t.width,b=void 0===m?400:m,k=l(r,n),g=l(r,h),x=[],w=0;w<r;w++){var M=void 0,j=void 0;do{j=v/2+Math.random()*(p-v),M=v/2+Math.random()*(b-v)}while(f(x,0,v,{x:M,y:j}).length);var O=k.has(w)?"sick":"healthy",S=k.has(w)?s:null,E=g.has(w),R=E?0:i,D=R*(2*Math.random()-1),A=R*(2*Math.random()-1);x.push({x:M,y:j,status:O,isBouncing:!1,isDistancing:E,vx:D,vy:A,recovery:S,speed:R})}return{agents:x,sick:n,healthy:r-n,dead:0,recovered:0}}var y=function(t){var e,r;function a(e){var r;return(r=t.call(this,e)||this).myRef=n.a.createRef(),r}r=t,(e=a).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var o=a.prototype;return o.componentDidUpdate=function(){var t=this.props,e=t.data,r=t.params,a=r.width,n=r.height,o=r.r,i=this.myRef.current.getContext("2d");i.fillStyle="#fff",i.lineWidth="5px",i.clearRect(0,0,a,n),e.agents.forEach((function(t){var e=t.status,r=(t.isBouncing,t.x),a=t.y;i.beginPath(),i.fillStyle=h[e],i.arc(r,a,o,0,2*Math.PI,!1),i.closePath(),i.fill()}))},o.render=function(){return n.a.createElement("div",null,n.a.createElement("canvas",{width:this.props.params.width,height:this.props.params.height,ref:this.myRef}))},a}(n.a.Component),p=Object(c.g)(y),m=[{color:h.healthy,label:"Healthy",accessor:function(t){return t.healthy}},{color:h.sick,label:"Sick",accessor:function(t){return t.sick}},{color:h.recovered,label:"Recovered",accessor:function(t){return t.recovered}},{color:h.dead,label:"Dead",accessor:function(t){return t.dead}}],b=function(){return n.a.createElement(c.d,{auto:"false",initData:v,initialParams:{nbAgents:500,nbSick:20,contaminationRisk:1,deathRisk:.001,maxSpeed:2,recoveryTicks:200,nbDistancing:0,r:3,height:300,width:500},updateData:d,maxTime:500},n.a.createElement(i.c,{flexDirection:"column"},n.a.createElement(p,null),n.a.createElement(c.e,{series:m,stacked:!0}),n.a.createElement(c.a,{series:m})))};var k={Title:"Epidemic"},g={_frontmatter:k};function x(t){var e=t.components,r=function(t,e){if(null==t)return{};var r,a,n={},o=Object.keys(t);for(a=0;a<o.length;a++)r=o[a],e.indexOf(r)>=0||(n[r]=t[r]);return n}(t,["components"]);return Object(o.b)("wrapper",Object.assign({},g,r,{components:e,mdxType:"MDXLayout"}),Object(o.b)("h1",null,"Epidemic"),Object(o.b)(b,{mdxType:"Epidemic"}),Object(o.b)("h3",null,"Caveat"),Object(o.b)("p",null,"The purpose of this model is just to show how simulations work in React. It has no scientific value."))}x.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-examples-epidemic-mdx-2c7d9e4df5c8d01754c4.js.map