(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{CczQ:function(e,t,r){var n=r("P8UN"),a=Math.abs;n(n.S,"Math",{hypot:function(e,t){for(var r,n,i=0,o=0,c=arguments.length,s=0;o<c;)s<(r=a(arguments[o++]))?(i=i*(n=s/r)*n+1,s=r):i+=r>0?(n=r/s)*n:r;return s===1/0?1/0:s*Math.sqrt(i)}})},Hmny:function(e,t,r){"use strict";r.r(t),r.d(t,"_frontmatter",(function(){return x})),r.d(t,"default",(function(){return w}));r("rzGZ"),r("Dq+y"),r("8npG"),r("Ggvi"),r("E5k/");var n=r("q1tI"),a=r.n(n),i=r("7ljp"),o=(r("pJf4"),r("q8oJ"),r("cFtU"),r("m210"),r("4DPX"),r("n0hJ"),r("YbXK"),r("ToIb"),r("CczQ"),r("VdAu")),c=r("1uUR"),s=r("sCKr");function u(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var l={sick:"#4f8c9d",recovered:"#add51f",healthy:"#997cfb",dead:"#6a9012"};function h(e,t){var r=e.data,n=e.tick,a=e.params,i=e.complete;void 0===t&&(t=Math.random());var o=JSON.parse(JSON.stringify(r.agents)),c=0,s=0,u=0,d=0,l=a.contaminationRisk,h=a.deathRisk,f=a.r,v=a.recoveryTicks,y=a.height,p=a.width;return o.forEach((function(e,r){if("sick"===e.status&&(n>=e.recovery?e.status="recovered":t()<h&&(e.status="dead")),"dead"!==e.status){for(var a=r+1;a<o.length;a++){var i=o[a],m=i.x-e.x,b=i.y-e.y,k=Math.hypot(m,b);if(k<2*f){var x=m/k,g=b/k;e.vx=e.vx-x,e.vy=e.vy-g,i.vx=x,i.vy=g,"sick"===e.status&&"healthy"===i.status&&t()<=l&&(i.status="sick",i.recovery=n+v),"healthy"===e.status&&"sick"===i.status&&t()<=l&&(e.status="sick",e.recovery=n+v)}}e.x=e.x+e.vx,e.y=e.y+e.vy,(e.vy<0&&e.y<f||e.vy>0&&e.y>y-f)&&(e.vy=-e.vy),(e.vx<0&&e.x<f||e.vx>0&&e.x>p-f)&&(e.vx=-e.vx)}switch(e.status){case"sick":c++;break;case"healthy":s++;break;case"recovered":d++;break;case"dead":u++}})),0===c&&i(),{agents:o,sick:c,recovered:d,dead:u,healthy:s}}function f(e,t,r){for(var n=u(Array(e).keys()).reduce((function(e,t){return e[t]=!0,e}),{}),a=new Set,i=0;i<t;i++){var o=Math.floor(r*Object.keys(n).length);a.add(o),delete n[o]}return a}function v(e,t,r,n){var a=n.x,i=n.y;return e.slice(t).filter((function(e){var t=e.x,n=e.y;return Math.hypot(t-a,n-i)<r}))}function y(e,t){var r=e.nbAgents,n=void 0===r?200:r,a=e.nbSick,i=void 0===a?5:a,o=e.maxSpeed,c=void 0===o?30:o,s=(e.contaminationRisk,e.deathRisk,e.recoveryTicks),u=void 0===s?20:s,d=e.nbDistancing,l=void 0===d?50:d,h=e.r,y=void 0===h?3:h,p=e.height,m=void 0===p?300:p,b=e.width,k=void 0===b?400:b;void 0===t&&(t=Math.random);for(var x=f(n,i,t),g=f(n,l,t),w=[],E=0;E<n;E++){var j=void 0,O=void 0;do{O=y/2+t()*(m-y),j=y/2+t()*(k-y)}while(v(w,0,y,{x:j,y:O}).length);var S=x.has(E)?"sick":"healthy",R=x.has(E)?u:null,A=g.has(E),D=A?0:c,M=D*(2*t()-1),T=D*(2*t()-1);w.push({x:j,y:O,status:S,isBouncing:!1,isDistancing:A,vx:M,vy:T,recovery:R,speed:D})}return{agents:w,sick:i,healthy:n-i,dead:0,recovered:0}}var p=function(e){var t,r;function n(t){var r;return(r=e.call(this,t)||this).myRef=a.a.createRef(),r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i=n.prototype;return i.componentDidUpdate=function(){var e=this.props,t=e.data,r=e.params,n=r.width,a=r.height,i=r.r,o=this.myRef.current.getContext("2d");o.fillStyle="#fff",o.lineWidth="5px",o.clearRect(0,0,n,a),t.agents.forEach((function(e){var t=e.status,r=(e.isBouncing,e.x),n=e.y;o.beginPath(),o.fillStyle=l[t],o.arc(r,n,i,0,2*Math.PI,!1),o.closePath(),o.fill()}))},i.render=function(){return a.a.createElement("div",null,a.a.createElement("canvas",{width:this.props.params.width,height:this.props.params.height,ref:this.myRef}))},n}(a.a.Component),m=Object(c.i)(p),b=[{color:l.healthy,label:"Healthy",accessor:function(e){return e.healthy}},{color:l.sick,label:"Sick",accessor:function(e){return e.sick}},{color:l.recovered,label:"Recovered",accessor:function(e){return e.recovered}},{color:l.dead,label:"Dead",accessor:function(e){return e.dead}}],k=function(){return a.a.createElement(s.a,{auto:"false",initData:y,initialParams:{nbAgents:500,nbSick:20,contaminationRisk:1,deathRisk:.001,maxSpeed:2,recoveryTicks:200,nbDistancing:0,r:3,height:300,width:500},updateData:h,maxTime:500},a.a.createElement(o.c,{flexDirection:"column"},a.a.createElement(m,null),a.a.createElement(c.f,{series:b,stacked:!0}),a.a.createElement(c.b,{series:b})))};var x={Title:"Epidemic"},g={_frontmatter:x};function w(e){var t=e.components,r=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,["components"]);return Object(i.b)("wrapper",Object.assign({},g,r,{components:t,mdxType:"MDXLayout"}),Object(i.b)("h1",{id:"epidemic"},"Epidemic"),Object(i.b)(k,{mdxType:"Epidemic"}),Object(i.b)("h3",{id:"caveat"},"Caveat"),Object(i.b)("p",null,"The purpose of this model is just to show how simulations work in React. It has no scientific value."))}w.isMDXComponent=!0},sCKr:function(e,t,r){"use strict";r.d(t,"b",(function(){return c})),r.d(t,"a",(function(){return s}));var n=r("q1tI"),a=r.n(n),i=r("1uUR"),o=r("VdAu"),c=function(e){return a.a.createElement(o.c,{sx:{border:"1px solid currentcolor",my:2,p:2}},a.a.createElement(i.d,e))},s=function(e){return a.a.createElement(o.c,{sx:{border:"1px solid currentcolor",my:2,p:2,width:"fit-content"}},a.a.createElement(i.d,e))}}}]);
//# sourceMappingURL=component---src-pages-examples-epidemic-mdx-c68e9dadc72654d248f6.js.map