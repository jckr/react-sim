(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{smyd:function(e,t,r){"use strict";r.r(t),r.d(t,"_frontmatter",(function(){return O})),r.d(t,"default",(function(){return E}));r("rzGZ"),r("Dq+y"),r("8npG"),r("Ggvi"),r("E5k/");var n=r("q1tI"),o=r.n(n),a=r("7ljp"),i=(r("xtjI"),r("4DPX"),r("YBKJ"),r("n0hJ"),r("1uUR")),l=r("VdAu"),c=r("sCKr");function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=function(e,t){void 0===t&&(t=Math.random);var r=e.cols,n=e.rows,o=e.proportion,a=e.tolerance,i=Array(n).fill(0).map((function(e){return Array(r).fill(0).map((function(e){return{community:100*t()>o?1:0}}))}));i.forEach((function(e,t){return e.forEach((function(e,r){e.isHappy=h(i,r,t,a)}))}));var l=function(e,t){return e.reduce((function(r,n,o){return n.reduce((function(r,n,a){return r+h(e,a,o,t)}),r)}),0)}(i,a);return{grid:i,happy:l,happiness:l/(r*n),totalMoves:0}};function h(e,t,r,n){var o=function(e,t,r){var n=e.length,o=e[0].length,a=0===r||r===n-1;return 0===t||t===o-1?a?3:5:a?5:8}(e,t,r);return(o-function(e,t,r){var n=e[r][t].community;return[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]].reduce((function(o,a){var i=t+a[0],l=r+a[1];(function(e,t,r){if(!e)return!1;var n=e.length;if(r<0||r>=n)return!1;var o=e[0].length;if(t<0||t>=o)return!1;return!0})(e,i,l)&&(e[l][i].community===n&&(o+=1));return o}),0)}(e,t,r))/o<n/100}var m=function(e,t){var r=e.data,n=e.params,o=e.complete;void 0===t&&(t=Math.random);var a=n.cols,i=n.rows,l=n.threshold,c=n.tolerance,s=[],u=0,f=r.totalMoves,m=JSON.parse(JSON.stringify(r.grid));for(m.forEach((function(e,t){return e.forEach((function(e,r){e.prevX=r,e.prevY=t,h(m,r,t,c)?(u+=1,e.isHappy=1):(e.isHappy=0,s.push([r,t]))}))})),u>a*i*l/100&&o();s.length>1;){var d=s.shift(),b=Math.floor(t()*s.length),g=s[b],v=p({},m[d[1]][d[0]]);m[d[1]][d[0]]=p({},m[g[1]][g[0]]),m[g[1]][g[0]]=v,f+=2,s=s.slice(0,b).concat(s.slice(b+1))}return{grid:m,totalMoves:f,happy:u,happiness:u/(a*i)}},d=function(e){var t=e.ctx,r=e.data,n=e.params,o=e.circle,a=n.height,i=n.width,l=n.rows,c=n.cols,s=n.showmoves,p=a/l,u=i/c,f=.8*Math.min(p,u);t.clearRect(0,0,i,a),t.strokeStyle="#000",t.lineWidth=2,t.globalAlpha=1,r.grid.forEach((function(e,r){return e.forEach((function(e,n){if(0===e.community)t.fillStyle="#33e",o({x:(n+.5)*p,y:(r+.5)*u,r:f/2}),e.isHappy?t.fill():t.stroke();else{t.fillStyle="#a0c";var a=(n+.5)*p-f/2,i=(r+.5)*u-f/2;e.isHappy?t.fillRect(a,i,f,f):t.strokeRect(a,i,f,f)}}))})),s&&(t.strokeStyle="#222",t.fillStyle="#222",t.globalAlpha=.5,t.lineWidth=1,r.grid.forEach((function(e,r){e.forEach((function(e,n){if(void 0!==e.prevX){var a=e.prevX,i=e.prevY;if(a!==n||i!==r){var l=p*(a+.5),c=p*(n+.5),s=u*(i+.5),h=u*(r+.5);t.moveTo(l,s),t.lineTo(c,h),t.stroke(),o({x:l,y:s,r:f/4}),t.fill(),o({x:c,y:h,r:f/4}),t.fill()}}}))})))},b=function(e){return o.a.createElement(i.a,Object.assign({draw:d},e))},g={label:"Happiness",accessor:function(e){return e.happy}},v=[{label:"Happiness",accessor:function(e){return Math.floor(1e3*Number(e.happiness.toFixed(3)))/10+"%"}},{label:"Total moves",accessor:function(e){return e.totalMoves}}],y={cols:20,rows:20,height:330,width:330,tolerance:60,proportion:50,showmoves:!0,threshold:99},w=function(){return o.a.createElement(c.a,{initialParams:y,initData:f,updateData:m,maxTime:50,delay:100,controls:[{param:"tolerance",label:"Tolerance"},{param:"proportion",label:"Proportion"},{param:"threshold",label:"Threshold"},{param:"showmoves",label:"Show moves",type:"toggle"}]},o.a.createElement(l.c,{flexDirection:"column"},o.a.createElement(b,null),o.a.createElement(i.f,{series:g}),o.a.createElement(i.b,{series:v})))};var O={Title:"Segregation"},j={_frontmatter:O};function E(e){var t=e.components,r=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,["components"]);return Object(a.b)("wrapper",Object.assign({},j,r,{components:t,mdxType:"MDXLayout"}),Object(a.b)("h1",{id:"segregation"},"Segregation"),Object(a.b)(w,{mdxType:"Segregation"}),Object(a.b)("p",null,"This simulation is based on ",Object(a.b)("a",Object.assign({parentName:"p"},{href:"http://nifty.stanford.edu/2014/mccown-schelling-model-segregation/"}),"Schelling's model of segregation"),"."),Object(a.b)("p",null,"A territory, in the form of a familiar 2D grid, is randomly populated by citizens from one of two groups. The ",Object(a.b)("inlineCode",{parentName:"p"},"proportion")," of one of the groups can be adjusted.\nCitizens have a ",Object(a.b)("inlineCode",{parentName:"p"},"tolerance")," level - if the proportion of neighbors around them which are not from the same group is below their tolerance level, they will move and trade place with another unhappy neighbor.\nThe model stops when the share of citizens which are happy exceeds the ",Object(a.b)("inlineCode",{parentName:"p"},"threshold"),"."),Object(a.b)("p",null,"At high tolerance levels, the model stops soon enough and the territory remains similar to its original state.\nAt lower tolerance levels, islands of similar citizens form and the territory solidifies in a few homogeneous groups.\nAt lowest tolerance levels, the model may never stabilize and citizens are always moving."))}E.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-examples-segregation-mdx-4024bf16a5a5c348bbe1.js.map